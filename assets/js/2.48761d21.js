(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{435:function(t,e,i){"use strict";i(490),i(141),i(234),i(142),i(511),i(436);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.v3=e.Vec3=void 0;var o=i(451),s=i(437),a=i(442),h=i(457),c=function(t){function e(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var r=t.call(this)||this;return r._x=e,r._y=i,r._z=n,h.buildAccessors(["x","y","z"],r),r}return r(e,t),e.isVec3=function(t){return!isNaN(t.x)&&!isNaN(t.y)&&!isNaN(t.z)&&isNaN(t.w)},Object.defineProperty(e.prototype,"isVec3",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Up",{get:function(){return new e(0,1,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Down",{get:function(){return new e(0,1,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UnitX",{get:function(){return new e(1,0,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UnitY",{get:function(){return new e(0,1,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UnitZ",{get:function(){return new e(0,0,1)},enumerable:!1,configurable:!0}),e.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},e.prototype.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this},e.prototype.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},e.prototype.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},e.prototype.clone=function(){return new e(this.x,this.y,this.z)},e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},e.prototype.add=function(t,e){return void 0!==e?(console.warn("Vec3: .add() now only accepts one argument. Use .addVecs( a, b ) instead."),this.addVecs(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},e.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this},e.prototype.addVecs=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},e.prototype.addScaledVec=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},e.prototype.sub=function(t,e){return void 0!==e?(console.warn("Vec3: .sub() now only accepts one argument. Use .subVecs( a, b ) instead."),this.subVecs(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},e.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this},e.prototype.subVecs=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},e.prototype.multiply=function(t,e){return void 0!==e?this.multiplyVecs(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},e.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this},e.prototype.multiplyVecs=function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},e.prototype.applyEuler=function(t){return t&&t.isEuler||console.error("Vec3: .applyEuler() now expects an Euler rotation rather than a Vec3 and order."),this.applyQuat(u.setFromEuler(t))},e.prototype.applyAxisAngle=function(t,e){return this.applyQuat(u.setFromAxisAngle(t,e))},e.prototype.applyMat3=function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},e.prototype.applyMat4=function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this},e.prototype.applyQuat=function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z,a=t.w,h=a*e+o*n-s*i,c=a*i+s*e-r*n,l=a*n+r*i-o*e,u=-r*e-o*i-s*n;return this.x=h*a+u*-r+c*-s-l*-o,this.y=c*a+u*-o+l*-r-h*-s,this.z=l*a+u*-s+h*-o-c*-r,this},e.prototype.project=function(t){return this.applyMat4(t.matrixWorldInverse).applyMat4(t.projectionMatrix)},e.prototype.unproject=function(t){return this.applyMat4(t.projectionMatrixInverse).applyMat4(t.matrixWorld)},e.prototype.transformDirection=function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},e.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},e.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},e.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},e.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},e.prototype.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},e.prototype.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},e.prototype.clampLength=function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},e.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},e.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},e.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},e.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},e.prototype.normalize=function(t){return void 0===t&&(t=!1),this.divideScalar(this.length()||1)},e.prototype.setLength=function(t){return this.normalize().multiplyScalar(t)},e.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},e.prototype.lerpVecs=function(t,e,i){return this.subVecs(e,t).multiplyScalar(i).add(t)},e.prototype.cross=function(t,e){return void 0!==e?(console.warn("Vec3: .cross() now only accepts one argument. Use .crossVecs( a, b ) instead."),this.crossVecs(t,e)):this.crossVecs(this,t)},e.prototype.crossVecs=function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this},e.prototype.projectOnVec=function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},e.prototype.projectOnPlaneNormal=function(t){return l.copy(this).projectOnVec(t),this.sub(l)},e.prototype.projectOnPlane=function(t){var e=t.normal.dot(this)-t.w;return l.copy(t.normal).multiplyScalar(e),this.sub(l)},e.prototype.projectDirectionOnPlane=function(t,e){var i=t.normal.dot(this)-t.w;l.copy(t.normal).multiplyScalar(i),l.negate().add(this);var n=this.distanceTo(l)/t.normal.dot(e);return this.add(l.copy(e).negate().multiplyScalar(n)),this},e.prototype.reflect=function(t){return this.sub(l.copy(t).multiplyScalar(2*this.dot(t)))},e.prototype.angleTo=function(t,e){if(e)return this.angleToEx(t,e);var i=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(s.clamp(i,-1,1))},e.prototype.angleToEx=function(t,e){var i=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return this.clone().cross(t).dot(e)>0?Math.acos(s.clamp(i,-1,1)):2*Math.PI-Math.acos(s.clamp(i,-1,1))},e.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},e.prototype.distanceToSquared=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},e.prototype.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},e.prototype.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},e.prototype.setFromSphericalCoords=function(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this},e.prototype.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},e.prototype.setFromCylindricalCoords=function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},e.prototype.setFromMatrixPosition=function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},e.prototype.setFromMatrixScale=function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},e.prototype.setFromMatrixColumn=function(t,e){return this.fromArray(t.elements,4*e)},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},e.prototype.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},e.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},e.prototype.fromBufferAttribute=function(t,e,i){return void 0!==i&&console.warn("Vec3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},e.prototype.toFixed=function(t){return void 0!==t&&(this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t))),this},e.prototype.distancePoint=function(t){var e={};return e.distanceSqr=this.distanceToSquared(t),e.distance=Math.sqrt(e.distanceSqr),e},e.prototype.distanceVec3=function(t){return this.distancePoint(t)},e.prototype.distanceLine=function(t){var e={parameters:[],closests:[]},i=this.clone().sub(t.origin),n=t.direction.dot(i),r=t.direction.clone().multiplyScalar(n).add(t.origin);return e.parameters.push(0,n),e.closests.push(this,r),i=e.closests[0].clone().sub(e.closests[1]),e.distanceSqr=i.dot(i),e.distance=Math.sqrt(e.distanceSqr),e},e.prototype.distanceRay=function(t){var e={parameters:[0],closests:[this]},i=this.clone().sub(t.origin);return e.parameters[1]=t.direction.dot(i),e.parameters[1]>0?e.closests[1]=t.direction.clone().multiplyScalar(e.parameters[1]).add(t.origin):e.closests[1]=t.origin.clone(),i=this.clone().sub(e.closests[1]),e.distanceSqr=i.dot(i),e.distance=Math.sqrt(e.distanceSqr),e},e.prototype.distanceSegment=function(t){var e={parameters:[],closests:[]},i=this.clone().sub(t.p1),n=t.extentDirection.dot(i);if(n>=0)e.parameters[1]=1,e.closests[1]=t.p1;else if(i=this.clone().sub(t.p0),(n=t.extentDirection.dot(i))<=0)e.parameters[1]=0,e.closests[1]=t.p0;else{var r=t.extentSqr;r<=0&&(r=0),n/=r,e.parameters[1]=n,e.closests[1]=t.extentDirection.clone().multiplyScalar(n).add(t.p0)}return e.closests[0]=this,i=this.clone().sub(e.closests[1]),e.distanceSqr=i.dot(i),e.distance=Math.sqrt(e.distanceSqr),e},e.prototype.distancePlane=function(t){var e={parameters:[],closests:[],signedDistance:0,distance:0};return e.signedDistance=this.clone().dot(t.normal)-t.w,e.distance=Math.abs(e.signedDistance),e.closests[1]=this.clone().sub(t.normal.clone().multiplyScalar(e.signedDistance)),e},e.prototype.distanceCircle=function(t){var e={parameters:[],closests:[],equidistant:!1},i=this.clone().sub(t.center),n=i.clone().sub(t.normal.clone().multiplyScalar(t.normal.dot(i))),r=n.length();if(r>s.gPrecision)e.circleClosest=n.clone().multiplyScalar(t.radius/r).add(t.center),e.equidistant=!1;else{var o=t.center.clone().add(p(10,10,10)).sub(t.center),a=o.clone().sub(t.normal.clone().multiplyScalar(t.normal.dot(o))).normalize();e.circleClosest=a.clone().multiplyScalar(t.radius).add(t.center),e.equidistant=!0}e.closests.push(this,e.circleClosest);var h=this.clone().sub(e.circleClosest);return e.distanceSqr=h.dot(h),e.distance=Math.sqrt(e.distanceSqr),e},e.prototype.distanceDisk=function(t){var e={parameters:[],closests:[],signedDistance:1,distanceSqr:0,distance:0},i=this.clone().sub(t.center),n=i.clone().sub(t.normal.clone().multiplyScalar(t.normal.dot(i))),r=n.length();if(e.signedDistance=this.clone().dot(t.normal)-t.w,r>t.radius)e.diskClosest=n.clone().multiplyScalar(t.radius/r).add(t.center);else{var o=this.clone().dot(t.normal)-t.w;e.diskClosest=this.clone().sub(t.normal.clone().multiplyScalar(o))}e.closests.push(this,e.diskClosest);var s=this.clone().sub(e.diskClosest);return e.distanceSqr=s.dot(s),e.distance=Math.sqrt(e.distanceSqr),e},e.prototype.distancePolyline=function(t){for(var e,i=1/0,n=-1,r=null,o=0;o<t.length-1;o++){var s=t[o],h=t[o+1];Math.abs(s.x-this.x)>i&&Math.abs(h.x-this.x)>i&&(s.x-this.x)*(h.x-this.x)>0||(Math.abs(s.y-this.y)>i&&Math.abs(h.y-this.y)>i&&(s.y-this.y)*(h.y-this.y)>0||Math.abs(s.z-this.z)>i&&Math.abs(h.z-this.z)>i&&(s.z-this.z)*(h.z-this.z)>0||(e=this.distanceSegment(new a.Segment(s,h))).distance<i&&(i=e.distance,r=e,n=o))}return r.segmentIndex=n,r},e.prototype.distanceTriangle=function(t){function e(t,e,i){i[0]=0,i[1]=e>=0?0:t+e<=0?1:-e/t}function i(t,e,i,n,r,o){var s=t+i-n;if(s>=0)o[1]=0;else{var a=e+i-r;o[1]=a<=0?1:s/(s-a)}o[0]=1-o[1]}function n(t,e,i,n,r){var o=e/(e-n);r[0]=(1-o)*t[0]+o*i[0],r[1]=(1-o)*t[1]+o*i[1]}var r,o,s,a=this.clone().sub(t.p0),h=t.p1.clone().sub(t.p0),c=t.p2.clone().sub(t.p0),l=h.dot(h),u=h.dot(c),p=c.dot(c),f=-a.dot(h),y=-a.dot(c),d=f,v=f+l,m=f+u,g=[0,0],_=[0,0],x=[0,0];d>=0?m>=0?e(p,y,x):(g[0]=0,g[1]=d/(d-m),_[0]=m/(m-v),_[1]=1-_[0],(o=(r=_[1]-g[1])*(p*g[1]+y))>=0?e(p,y,x):(s=r*(u*_[0]+p*_[1]+y))<=0?i(u,p,y,v,m,x):n(g,o,_,s,x)):m<=0?v<=0?i(u,p,y,v,m,x):(g[0]=d/(d-v),g[1]=0,_[0]=m/(m-v),_[1]=1-_[0],(o=_[1]*(u*g[0]+y))>=0?x=g:(s=_[1]*(u*_[0]+p*_[1]+y))<=0?i(u,p,y,v,m,x):n(g,o,_,s,x)):v<=0?(g[0]=0,g[1]=d/(d-m),_[0]=m/(m-v),_[1]=1-_[0],(o=(r=_[1]-g[1])*(p*g[1]+y))>=0?e(p,y,x):(s=r*(u*_[0]+p*_[1]+y))<=0?i(u,p,y,v,m,x):n(g,o,_,s,x)):(g[0]=d/(d-v),g[1]=0,_[0]=0,_[1]=d/(d-m),(o=_[1]*(u*g[0]+y))>=0?x=g:(s=_[1]*(p*_[1]+y))<=0?e(p,y,x):n(g,o,_,s,x));var b={closests:[],parameters:[],triangleParameters:[]};b.triangleParameters[0]=1-x[0]-x[1],b.triangleParameters[1]=x[0],b.triangleParameters[2]=x[1];var M=t.p0.clone().add(h.multiplyScalar(x[0])).add(c.multiplyScalar(x[1]));return b.parameters.push(0,b.triangleParameters),b.closests.push(this,M),a=this.clone().sub(M),b.distanceSqr=a.dot(a),b.distance=Math.sqrt(b.distanceSqr),b},e.prototype.distanceRectangle=function(t){var e={rectangleParameters:[],parameters:[],closests:[]},i=t.center.clone().sub(this),n=i.dot(t.axis[0]),r=i.dot(t.axis[1]),o=-n,s=-r;e.distanceSqr=i.dot(i),o<-t.extent[0]?o=-t.extent[0]:o>t.extent[0]&&(o=t.extent[0]),e.distanceSqr+=o*(o+2*n),s<-t.extent[1]?s=-t.extent[1]:s>t.extent[1]&&(s=t.extent[1]),e.distanceSqr+=s*(s+2*r),e.distanceSqr<0&&(e.distanceSqr=0),e.distance=Math.sqrt(e.distanceSqr),e.rectangleParameters[0]=o,e.rectangleParameters[1]=s;for(var a=t.center.clone(),h=0;h<2;++h)a.add(t.axis[h].multiplyScalar(e.rectangleParameters[h]));return e.closests[0]=this,e.closests[1]=a,e},e.prototype.distanceCapsule=function(t){var e=this.distanceSegment(t);e.distance=e.distance-t.radius;var i=this.clone().sub(e.closests[1]).normalize().multiplyScalar(t.radius);return e.interior=e.distance<0,e.closests=[this,i],e},e}(i(450).EventHandler);e.Vec3=c;var l=p(),u=o.quat();function p(t,e,i){return new c(t,e,i)}e.v3=p},437:function(t,e,i){"use strict";i(448),i(490),i(234),i(511),Object.defineProperty(e,"__esModule",{value:!0}),e.toFixed=e.radToDeg=e.degToRad=e.floorPowerOfTwo=e.ceilPowerOfTwo=e.isPowerOfTwo=e.randFloat=e.randInt=e.smootherstep=e.smoothstep=e.lerp=e.clamp=e.approximateEqual=e.sign=e.gPrecision=void 0,e.gPrecision=1e-4;var n=Math.PI/180,r=180/Math.PI;e.sign=function(t){return t>=0?1:-1},e.approximateEqual=function(t,i,n){return void 0===n&&(n=e.gPrecision),Math.abs(t-i)<n},e.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},e.lerp=function(t,e,i){return(1-i)*t+i*e},e.smoothstep=function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},e.smootherstep=function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},e.randInt=function(t,e){return t+Math.floor(Math.random()*(e-t+1))},e.randFloat=function(t,e){return t+Math.random()*(e-t)},e.isPowerOfTwo=function(t){return 0==(t&t-1)&&0!==t},e.ceilPowerOfTwo=function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},e.floorPowerOfTwo=function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},e.degToRad=function(t){return t*n},e.radToDeg=function(t){return t*r},e.toFixed=function(t,e){return t instanceof Number?parseFloat(t.toFixed(e)):(void 0!==t.x&&(t.x=parseFloat(t.x.toFixed(e))),void 0!==t.y&&(t.y=parseFloat(t.y.toFixed(e))),void 0!==t.z&&(t.z=parseFloat(t.z.toFixed(e))),t)}},440:function(t,e,i){"use strict";i(234),i(436),Object.defineProperty(e,"__esModule",{value:!0}),e.line=e.Line=void 0;var n=i(435),r=i(442),o=i(437),s=function(){function t(t,e){void 0===t&&(t=n.v3()),void 0===e&&(e=n.v3()),this.origin=t,this.end=e,this.direction=this.end.clone().sub(this.origin).normalize()}return t.prototype.distancePoint=function(t){return t.distanceLine(this)},t.prototype.distanceSegment=function(t){var e,i,n={parameters:[],closests:[]},r=t.center,o=t.direction,s=.5*t.extent,a=this.origin.clone().sub(r),h=-this.direction.dot(o),c=a.dot(this.direction);if(Math.abs(h)<1){var l=1-h*h,u=s*l,p=-a.dot(o);(i=h*c-p)>=-u?i<=u?(e=(h*p-c)/l,i/=l):e=-(h*(i=s)+c):e=-(h*(i=-s)+c)}else i=0,e=-c;return n.parameters[0]=e,n.parameters[1]=i,n.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),n.closests[1]=o.clone().multiplyScalar(i).add(r),a=n.closests[0].clone().sub(n.closests[1]),n.distanceSqr=a.dot(a),n.distance=Math.sqrt(n.distanceSqr),n},t.prototype.distanceLine=function(t){var e,i,n={parameters:[],closests:[]},r=this.origin.clone().sub(t.origin),o=-this.direction.dot(t.direction),s=r.dot(this.direction);if(Math.abs(o)<1){var a=1-o*o,h=-r.dot(t.direction);e=(o*h-s)/a,i=(o*s-h)/a}else e=-s,i=0;return n.parameters[0]=e,n.parameters[1]=i,n.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),n.closests[1]=t.direction.clone().multiplyScalar(i).add(t.origin),r=n.closests[0].clone().sub(n.closests[1]),n.distanceSqr=r.dot(r),n.distance=Math.sqrt(n.distanceSqr),n},t.prototype.distanceRay=function(t){var e,i,n={parameters:[],closests:[]},r=this.origin.clone().sub(t.origin),o=-this.direction.dot(t.direction),s=r.dot(this.direction);if(Math.abs(o)<1){var a=-r.dot(t.direction);if((i=o*s-a)>=0){var h=1-o*o;e=(o*a-s)/h,i/=h}else e=-s,i=0}else e=-s,i=0;return n.parameters[0]=e,n.parameters[1]=i,n.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),n.closests[1]=t.direction.clone().multiplyScalar(i).add(t.origin),r=n.closests[0].clone().sub(n.closests[1]),n.distanceSqr=r.dot(r),n.distance=Math.sqrt(n.distanceSqr),n},t.prototype.distanceTriangle=function(t){var e,i,s,a={closests:[],parameters:[],triangleParameters:[]},h=t.p1.clone().sub(t.p0),c=t.p2.clone().sub(t.p0),l=h.clone().cross(c).normalize().dot(this.direction);if(Math.abs(l)>=o.gPrecision){var u=this.origin.clone().sub(t.p0),p=new Array(3);p[0]=this.direction,i=p,void 0===s&&(s=!1),1===(e=1)&&(Math.abs(i[0][0])>Math.abs(i[0][1])?i[1]=n.v3(-i[0].z,0,+i[0].x):i[1]=n.v3(0,+i[0].z,-i[0].y),e=2),2==e&&(i[2]=i[0].clone().cross(i[1]),function(t,e,i){if(void 0===i&&(i=!1),e&&1<=t&&t<=3){var n=e[0].length();e[0].normalize();for(var r=1;r<t;++r){for(var o=0;o<r;++o){var s=e[r].dot(e[o]);e[r].sub(e[o].clone().multiplyScalar(s))}var a=e[r].length();e[r].normalize(),a<n&&(n=a)}return n}}(3,i,s));var f=p[1].dot(h),y=p[1].dot(c),d=p[1].dot(u),v=p[2].dot(h),m=p[2].dot(c),g=p[2].dot(u),_=1/(f*m-y*v),x=(m*d-y*g)*_,b=(f*g-v*d)*_,M=1-x-b;if(M>=0&&x>=0&&b>=0){var w=this.direction.dot(h),z=this.direction.dot(c),P=this.direction.dot(u);return a.lineParameter=x*w+b*z-P,a.triangleParameters[0]=M,a.triangleParameters[1]=x,a.triangleParameters[2]=b,a.closests[0]=this.direction.clone().multiplyScalar(a.lineParameter).add(this.origin),a.closests[1]=h.multiplyScalar(x).add(c.multiplyScalar(b)).add(t.p0),a.distance=0,a.distanceSqr=0,a}}a.distance=1/0,a.distanceSqr=1/0;for(var S=2,O=0;O<3;S=O++){t[S].clone().add(t[O]).multiplyScalar(.5);var A=t[O].clone().sub(t[S]),j=.5*A.length();A.normalize();var k=new r.Segment(t[S],t[O]),V=this.distanceSegment(k);V.distanceSqr<a.distanceSqr&&(a.distanceSqr=V.distanceSqr,a.distance=V.distance,a.lineParameter=V.parameters[0],a.triangleParameters[S]=.5*(1-V.parameters[0]/j),a.triangleParameters[O]=1-a.triangleParameters[S],a.triangleParameters[3-S-O]=0,a.closests[0]=V.closests[0],a.closests[1]=V.closests[1])}return a},t.prototype.distancePolyline=function(t){for(var e=null,i=-1,n=0;n<t.length-1;n++){var s=new r.Segment(t[n],t[n+1]),a=this.distanceSegment(s);if((!e||e.distance<a.distance)&&(e=a),e.distance<o.gPrecision){i=n;break}}return{distance:null==e?void 0:e.distance,distanceSqr:null==e?void 0:e.distanceSqr,parameters:null==e?void 0:e.parameters,closests:null==e?void 0:e.closests,segmentIndex:i}},t}();e.Line=s,e.line=function(t,e){return new s(t,e)}},442:function(t,e,i){"use strict";i(141),i(234),i(142),i(436);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.segment=e.Segment=void 0;var o=i(435),s=function(t){function e(i,n){void 0===i&&(i=o.v3()),void 0===n&&(n=o.v3());var r=t.call(this)||this;return Object.setPrototypeOf(r,e.prototype),r.push(i,n),r.center=i.clone().add(n).multiplyScalar(.5),r.extentDirection=n.clone().sub(i),r.extentSqr=r.extentDirection.lengthSq(),r.extent=Math.sqrt(r.extentSqr),r.direction=r.extentDirection.clone().normalize(),r}return r(e,t),Object.defineProperty(e.prototype,"p0",{get:function(){return this[0]},set:function(t){this[0].copy(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"p1",{get:function(){return this[1]},set:function(t){this[1].copy(t)},enumerable:!1,configurable:!0}),e.prototype.offset=function(t,e){void 0===e&&(e=o.Vec3.UnitY);var i=this.direction.clone().applyAxisAngle(e,Math.PI/2);i.normalize().multiplyScalar(t),this.p0.add(i),this.p1.add(i)},e.prototype.distanceSegment=function(t){var e={parameters:[],closests:[]};function i(t,e,i){var n;return e<0?i>0?(n=-e/t)>1&&(n=.5):n=1:n=0,n}var n=this.p1.clone().sub(this.p0),r=t.p1.clone().sub(t.p0),o=this.p0.clone().sub(t.p0),s=n.dot(n),a=n.dot(r),h=r.dot(r),c=n.dot(o),l=r.dot(o),u=c,p=u+s,f=u-a,y=p-a,d=-l,v=d-a,m=d+h,g=v+h;if(s>0&&h>0){var _=[];_[0]=i(s,u,p),_[1]=i(s,f,y);for(var x=[],b=0;b<2;++b)_[b]<=0?x[b]=-1:_[b]>=1?x[b]=1:x[b]=0;if(-1==x[0]&&-1==x[1])e.parameters[0]=0,e.parameters[1]=i(h,d,m);else if(1==x[0]&&1==x[1])e.parameters[0]=1,e.parameters[1]=i(h,v,g);else{for(var M=[],w=new Array(2),z=0;z<w.length;z++)w[z]=new Array(2);!function(t,e,i,n){e[0]<0?(i[0]=0,n[0][0]=0,n[0][1]=u/a,(n[0][1]<0||n[0][1]>1)&&(n[0][1]=.5),0==e[1]?(i[1]=3,n[1][0]=t[1],n[1][1]=1):(i[1]=1,n[1][0]=1,n[1][1]=p/a,(n[1][1]<0||n[1][1]>1)&&(n[1][1]=.5))):0==e[0]?(i[0]=2,n[0][0]=t[0],n[0][1]=0,e[1]<0?(i[1]=0,n[1][0]=0,n[1][1]=u/a,(n[1][1]<0||n[1][1]>1)&&(n[1][1]=.5)):0==e[1]?(i[1]=3,n[1][0]=t[1],n[1][1]=1):(i[1]=1,n[1][0]=1,n[1][1]=p/a,(n[1][1]<0||n[1][1]>1)&&(n[1][1]=.5))):(i[0]=1,n[0][0]=1,n[0][1]=p/a,(n[0][1]<0||n[0][1]>1)&&(n[0][1]=.5),0==e[1]?(i[1]=3,n[1][0]=t[1],n[1][1]=1):(i[1]=0,n[1][0]=0,n[1][1]=u/a,(n[1][1]<0||n[1][1]>1)&&(n[1][1]=.5)))}(_,x,M,w),function(t,e,n){var r=e[1][1]-e[0][1],o=r*(-a*e[0][0]+h*e[0][1]-l);if(o>=0)0==t[0]?(n[0]=0,n[1]=i(h,d,m)):1==t[0]?(n[0]=1,n[1]=i(h,v,g)):(n[0]=e[0][0],n[1]=e[0][1]);else{var s=r*(-a*e[1][0]+h*e[1][1]-l);if(s<=0)0==t[1]?(n[0]=0,n[1]=i(h,d,m)):1==t[1]?(n[0]=1,n[1]=i(h,v,g)):(n[0]=e[1][0],n[1]=e[1][1]);else{var c=Math.min(Math.max(o/(o-s),0),1),u=1-c;n[0]=u*e[0][0]+c*e[1][0],n[1]=u*e[0][1]+c*e[1][1]}}}(M,w,e.parameters)}}else s>0?(e.parameters[0]=i(s,u,p),e.parameters[1]=0):h>0?(e.parameters[0]=0,e.parameters[1]=i(h,d,m)):(e.parameters[0]=0,e.parameters[1]=0);e.closests[0]=this.p0.clone().multiplyScalar(1-e.parameters[0]).add(this.p1.clone().multiplyScalar(e.parameters[0])),e.closests[1]=t.p0.clone().multiplyScalar(1-e.parameters[1]).add(t.p1.clone().multiplyScalar(e.parameters[1]));var P=e.closests[0].clone().sub(e.closests[1]);return e.distanceSqr=P.dot(P),e.distance=Math.sqrt(e.distanceSqr),e},e.prototype.intersectSegment=function(t){},e}(Array);e.Segment=s,e.segment=function(t,e){return new s(t,e)}},444:function(t,e,i){"use strict";i(240),i(445),i(149),i(245),i(446),i(438),i(447),i(448),i(490),i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.unique=e.classify=e.flat=e.forall=e.toFixed=e.clone=void 0;var n=i(437);Array.prototype.get=function(t){return t<0&&(t=this.length+t),this[t]},Array.prototype.last=function(){return this.get(-1)},e.clone=function t(e){for(var i=new Array,n=0;n<e.length;n++){var r=e[n];if(r instanceof Number||r instanceof String)i[n]=r;else if(r.clone)i[n]=r.clone();else{if(!(r instanceof Array))throw"数组有元素不能clone";i[n]=t(r)}}return i},e.toFixed=function t(e,i){void 0===i&&(i=n.gPrecision);for(var r=0;r<e.length;r++){var o=e[r];o instanceof Array?t(o):e[r]=n.toFixed(o,i)}},e.forall=function t(e,i){for(var n=0;n<e.length;n++){var r=e[n];i(r,n,e),Array.isArray(r)&&t(r,i)}},e.flat=function t(e){return e.flat?e.flat(1/0):e.reduce((function(e,i){return e.concat(Array.isArray(i)?t(i):i)}))},e.classify=function(t,e){for(var i=[],n=0;n<t.length;n++)for(var r=0;r<i.length;r++)e(t[n],i[r][0],i[r])?i[r].push(t[n]):i.push([t[n]]);return i},e.unique=function(t,e,i){if(i){t.sort(i);for(var n=0;n<t.length;n++)for(var r=n+1;r<t.length&&!0===e(t[n],t[r]);r++)t.splice(r,1),r--;return t}for(n=0;n<t.length;n++)for(r=n+1;r<t.length;r++)!0===e(t[n],t[r])&&(t.splice(r,1),r--);return t}},450:function(t,e,i){"use strict";i(235),i(61),i(438),i(234);var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.EventHandler=void 0;var r=function(){function t(){this._callbacks={},this._callbackActive={}}return t.prototype._addCallback=function(t,e,i,n){t&&"string"==typeof t&&e&&(this._callbacks[t]||(this._callbacks[t]=[]),this._callbackActive[t]&&this._callbackActive[t]===this._callbacks[t]&&(this._callbackActive[t]=this._callbackActive[t].slice()),this._callbacks[t].push({callback:e,scope:i||this,once:n||!1}))},t.prototype.on=function(t,e,i){return this._addCallback(t,e,i,!1),this},t.prototype.off=function(t,e,i){if(t)this._callbackActive[t]&&this._callbackActive[t]===this._callbacks[t]&&(this._callbackActive[t]=this._callbackActive[t].slice());else for(var n in this._callbackActive)this._callbacks[n]&&this._callbacks[n]===this._callbackActive[n]&&(this._callbackActive[n]=this._callbackActive[n].slice());if(t)if(e){var r=this._callbacks[t];if(!r)return this;for(var o=r.length,s=0;s<o;s++)r[s].callback===e&&(i&&r[s].scope!==i||(r[s--]=r[--o]));r.length=o}else this._callbacks[t]&&(this._callbacks[t]=[]);else this._callbacks={};return this},t.prototype.fire=function(t){for(var e,i,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!t||!this._callbacks[t])return this;this._callbackActive[t]?(this._callbackActive[t]===this._callbacks[t]&&(this._callbackActive[t]=this._callbackActive[t].slice()),i=this._callbacks[t].slice()):this._callbackActive[t]=this._callbacks[t];for(var s=0;(i||this._callbackActive[t])&&s<(i||this._callbackActive[t]).length;s++){var a=(i||this._callbackActive[t])[s];if((e=a.callback).call.apply(e,n([a.scope],r)),a.once){var h=this._callbacks[t].indexOf(a);-1!==h&&(this._callbackActive[t]===this._callbacks[t]&&(this._callbackActive[t]=this._callbackActive[t].slice()),this._callbacks[t].splice(h,1))}}return i||(this._callbackActive[t]=null),this},t.prototype.once=function(t,e,i){return this._addCallback(t,e,i,!0),this},t.prototype.hasEvent=function(t){return this._callbacks[t]&&0!==this._callbacks[t].length||!1},t}();e.EventHandler=r},451:function(t,e,i){"use strict";i(448),i(568),i(141),i(234),i(142);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.quat=e.Quat=void 0;var o=i(437),s=i(450),a=i(457),h=function(t){function e(e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1);var o=t.call(this)||this;return o._x=e,o._y=i,o._z=n,o._w=r,o.isQuat=!0,a.buildAccessors(["x","y","z","w"],o),o}return r(e,t),e.slerp=function(t,e,i,n){return i.copy(t).slerp(e,n)},e.slerpFlat=function(t,e,i,n,r,o,s){var a=i[n+0],h=i[n+1],c=i[n+2],l=i[n+3],u=r[o+0],p=r[o+1],f=r[o+2],y=r[o+3];if(l!==y||a!==u||h!==p||c!==f){var d=1-s,v=a*u+h*p+c*f+l*y,m=v>=0?1:-1,g=1-v*v;if(g>Number.EPSILON){var _=Math.sqrt(g),x=Math.atan2(_,v*m);d=Math.sin(d*x)/_,s=Math.sin(s*x)/_}var b=s*m;if(a=a*d+u*b,h=h*d+p*b,c=c*d+f*b,l=l*d+y*b,d===1-s){var M=1/Math.sqrt(a*a+h*h+c*c+l*l);a*=M,h*=M,c*=M,l*=M}}t[e]=a,t[e+1]=h,t[e+2]=c,t[e+3]=l},e.multiplyQuatsFlat=function(t,e,i,n,r,o){var s=i[n],a=i[n+1],h=i[n+2],c=i[n+3],l=r[o],u=r[o+1],p=r[o+2],f=r[o+3];return t[e]=s*f+c*l+a*p-h*u,t[e+1]=a*f+c*u+h*l-s*p,t[e+2]=h*f+c*p+s*u-a*l,t[e+3]=c*f-s*l-a*u-h*p,t},e.prototype.set=function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.fire("change",this),this},e.prototype.clone=function(){return new e(this._x,this._y,this._z,this._w)},e.prototype.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.fire("change",this),this},e.prototype.setFromEuler=function(t,e){if(!t||!t.isEuler)throw new Error("Quat: .setFromEuler() now expects an Euler rotation rather than a Vec3 and order.");var i=t._x,n=t._y,r=t._z,o=t.order,s=Math.cos,a=Math.sin,h=s(i/2),c=s(n/2),l=s(r/2),u=a(i/2),p=a(n/2),f=a(r/2);return"XYZ"===o?(this._x=u*c*l+h*p*f,this._y=h*p*l-u*c*f,this._z=h*c*f+u*p*l,this._w=h*c*l-u*p*f):"YXZ"===o?(this._x=u*c*l+h*p*f,this._y=h*p*l-u*c*f,this._z=h*c*f-u*p*l,this._w=h*c*l+u*p*f):"ZXY"===o?(this._x=u*c*l-h*p*f,this._y=h*p*l+u*c*f,this._z=h*c*f+u*p*l,this._w=h*c*l-u*p*f):"ZYX"===o?(this._x=u*c*l-h*p*f,this._y=h*p*l+u*c*f,this._z=h*c*f-u*p*l,this._w=h*c*l+u*p*f):"YZX"===o?(this._x=u*c*l+h*p*f,this._y=h*p*l+u*c*f,this._z=h*c*f-u*p*l,this._w=h*c*l-u*p*f):"XZY"===o&&(this._x=u*c*l-h*p*f,this._y=h*p*l-u*c*f,this._z=h*c*f+u*p*l,this._w=h*c*l+u*p*f),!1!==e&&this.fire("change",this),this},e.prototype.setFromAxisAngle=function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.fire("change",this),this},e.prototype.setFromRotationMatrix=function(t){var e,i=t.elements,n=i[0],r=i[4],o=i[8],s=i[1],a=i[5],h=i[9],c=i[2],l=i[6],u=i[10],p=n+a+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(l-h)*e,this._y=(o-c)*e,this._z=(s-r)*e):n>a&&n>u?(e=2*Math.sqrt(1+n-a-u),this._w=(l-h)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(o+c)/e):a>u?(e=2*Math.sqrt(1+a-n-u),this._w=(o-c)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(h+l)/e):(e=2*Math.sqrt(1+u-n-a),this._w=(s-r)/e,this._x=(o+c)/e,this._y=(h+l)/e,this._z=.25*e),this.fire("change",this),this},e.prototype.setFromUnitVecs=function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},e.prototype.angleTo=function(t){return 2*Math.acos(Math.abs(o.clamp(this.dot(t),-1,1)))},e.prototype.rotateTowards=function(t,e){var i=this.angleTo(t);if(0===i)return this;var n=Math.min(1,e/i);return this.slerp(t,n),this},e.prototype.inverse=function(){return this.conjugate()},e.prototype.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.fire("change",this),this},e.prototype.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},e.prototype.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},e.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},e.prototype.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.fire("change",this),this},e.prototype.multiply=function(t,e){return void 0!==e?this.multiplyQuats(t,e):this.multiplyQuats(this,t)},e.prototype.premultiply=function(t){return this.multiplyQuats(t,this)},e.prototype.multiplyQuats=function(t,e){var i=t._x,n=t._y,r=t._z,o=t._w,s=e._x,a=e._y,h=e._z,c=e._w;return this._x=i*c+o*s+n*h-r*a,this._y=n*c+o*a+r*s-i*h,this._z=r*c+o*h+i*a-n*s,this._w=o*c-i*s-n*a-r*h,this.fire("change",this),this},e.prototype.slerp=function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w,s=o*t._w+i*t._x+n*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var a=1-s*s;if(a<=Number.EPSILON){var h=1-e;return this._w=h*o+e*this._w,this._x=h*i+e*this._x,this._y=h*n+e*this._y,this._z=h*r+e*this._z,this.normalize(),this.fire("change",this),this}var c=Math.sqrt(a),l=Math.atan2(c,s),u=Math.sin((1-e)*l)/c,p=Math.sin(e*l)/c;return this._w=o*u+this._w*p,this._x=i*u+this._x*p,this._y=n*u+this._y*p,this._z=r*u+this._z*p,this.fire("change",this),this},e.prototype.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},e.prototype.fromArray=function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.fire("change",this),this},e.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},e}(s.EventHandler);e.Quat=h,e.quat=function(t,e,i,n){return new h(t,e,i,n)}},452:function(t,e,i){"use strict";i(149),i(92),i(234),i(436),Object.defineProperty(e,"__esModule",{value:!0}),e.Plane=void 0;var n=i(435),r=i(437),o=i(572),s=function(){function t(t,e){void 0===t&&(t=n.Vec3.UnitZ),void 0===e&&(e=0),this.normal=t,this.w=e,this.origin=this.normal.clone().multiplyScalar(e)}return t.setFromPointNormal=function(e,i){var n=new t;return n.setFromPointNormal(e,i),n},t.prototype.setFromPointNormal=function(t,e){this.normal=e,this.w=t.dot(e)},t.prototype.setFromThreePoint=function(t,e,i){this.normal=e.clone().sub(t).cross(i.clone().sub(t)).normalize(),this.w=t.dot(this.normal)},t.prototype.negate=function(){this.normal.negate(),this.w=-this.w},t.prototype.frontback=function(t){var e=this.normal.dot(t);return r.approximateEqual(e,0)?0:r.sign(this.normal.dot(t))},t.prototype.distancePoint=function(t){return this.normal.dot(t)-this.w},t.prototype.distanceRay=function(t){},t.prototype.distanceLine=function(t){},t.prototype.distanceSegment=function(t){},t.prototype.distancePlane=function(t){},t.prototype.intersectSegmentLw=function(t){var e=this.orientationPoint(t[0])|this.orientationPoint(t[0]);if(e===o.Orientation.Common)return t;if(e===o.Orientation.Intersect){var i=t[0].clone().sub(this.origin).dot(this.normal);return this.normal.clone().multiplyScalar(i).add(t[0])}return null},t.prototype.splitSegment=function(t){var e={positive:[],negative:[],common:[],orientation:o.Orientation.None},i=this.orientationPoint(t[0]),n=this.orientationPoint(t[1]),r=i|n;if(e.orientation=r,i===o.Orientation.Positive?e.positive.push(t[0]):i===o.Orientation.Negative?e.negative.push(t[0]):e.common.push(t[0]),n===o.Orientation.Positive?e.positive.push(t[1]):n===o.Orientation.Negative?e.negative.push(t[1]):e.common.push(t[1]),r===o.Orientation.Intersect){var s=t[0].clone().sub(this.origin).dot(this.normal),a=this.normal.clone().multiplyScalar(s).add(t[0]);e.positive.push(a),e.negative.push(a)}return e},t.prototype.splitTriangle=function(t){for(var e,i,n,r={negative:[],positive:[],common:[],orientation:o.Orientation.None},s=this,a=t.map((function(t){return s.orientationPoint(t)})),h=0,c=0,l=0;l<t.length;l++){var u=a[l];u===o.Orientation.Positive?h++:u===o.Orientation.Negative?c++:0}var p=h>0,f=c>0,y=r.positive,d=r.negative;if(f&&!p)r.orientation=o.Orientation.Negative,(e=r.negative).push.apply(e,t);else if(!f&&p)r.orientation=o.Orientation.Positive,(i=r.positive).push.apply(i,t);else if(p&&f){r.orientation=o.Orientation.Intersect;for(var v=0;v<3;v++)if(a[v]||a[(v+1)%3]===o.Orientation.Intersect){a[v]===o.Orientation.Positive?d.push(t[v]):a[v]==o.Orientation.Negative?y.push(t[v]):(y.push(t[v]),d.push(t[v]),r.common.push(t[v]));var m=this.intersectSegmentLw([t[v],t[(v+1)%3]]);m&&(Array.isArray(m)||r.common.push(m))}}else r.orientation=o.Orientation.Common,(n=r.common).push.apply(n,t);return r},t.prototype.orientationPoint=function(t){var e=this.normal.clone().dot(t)-this.w;return Math.abs(e)<r.gPrecision?o.Orientation.Intersect:e<0?o.Orientation.Negative:o.Orientation.Positive},t}();e.Plane=s},457:function(t,e,i){"use strict";i(143),i(235),i(438),i(99),i(141),i(234),i(142),i(144);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.buildAccessors=e.buildAccessor=e.Thing=void 0;var o=i(450),s=i(565),a=function(t){function e(e){var i=t.call(this)||this;for(var n in i.cache={},e=e||{},i.uuid=s.v4(),i.id=i.uuid,i.name=e.name||"未命名",i.alias=e.alias,i.isThing=!0,i.parent=null,i.children=[],i.meta=void 0,i.needsUpdate=!1,i._renderObject=null,i._useData={},i.tag="untagged",i.on("set",(function(t,e,n){i.fire("set_"+t,t,e,n)})),e)e.hasOwnProperty(n)&&(i[n]||(i[n]=e[n]));return i}return r(e,t),e.prototype.add=function(t,e){if(void 0===e&&(e=!1),arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("Thing.add: 自己不能作为自己的子节点",t),this):(t&&this.isThing||t&&e?(t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t)):console.error("Thing.add:不是Thing类型",t),this)},e.prototype.remove=function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}this.parent.remove(this);var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1)),this},e.prototype.foreach=function(t){t(this);for(var e=this.children,i=0;i<e.length;i++)e[i].foreach(t)},e.prototype.getObjectByProperty=function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i];if(r.getObjectByProperty){var o=r.getObjectByProperty(t,e);if(void 0!==o)return o}}},e.prototype.getObjectById=function(t){return this.getObjectByProperty("id",t)},e.prototype.getObjectByName=function(t){return this.getObjectByProperty("name",t)},e.prototype.defineProperty=function(t,e,i){var n=this;void 0===i&&(i=!0),Object.defineProperty(this,t,{get:function(){return n._useData[t]},set:function(r){var o=n._useData,s=o[t];(i||s!==r)&&(o[t]=r,e&&e.call(n,r,s))},configurable:!0})},e.prototype.buildAccessor=function(t,e){void 0===e&&(e=this),e&&Object.defineProperty(e,t,{get:function(){return e["_"+t]},set:function(i){var n=e["_"+t];e["_"+t]=i,e.fire("set",t,n,i)},configurable:!0})},e.prototype.buildAccessors=function(t,e){var i=this;t.forEach((function(t){i.buildAccessor(t,e)}))},e}(o.EventHandler);function h(t,e){e&&Object.defineProperty(e,t,{get:function(){return e["_"+t]},set:function(i){var n=e["_"+t];e["_"+t]=i,e.fire("set",t,n,i)},configurable:!0})}e.Thing=a,e.buildAccessor=h,e.buildAccessors=function(t,e){t.forEach((function(t){h(t,e)}))}},458:function(t,e,i){"use strict";i(240),i(445),i(143),i(446),i(438),i(447),i(448),i(234),i(436),i(144),Object.defineProperty(e,"__esModule",{value:!0}),e.angle=e.calcCircleFromThreePoint=e.pointsCollinear=e.isInOnePlane=e.recognitionPlane=e.projectOnPlane=e.reverseOnPlane=e.simplifyPointList=e.applyMatrix4=e.scale=e.rotateByUnitVectors=e.rotate=e.translate=e.applyQuat=e.boundingBox=e.verctorToNumbers=e.vectorCompare=e.clone=void 0;var n=i(435),r=i(437),o=i(440),s=i(515),a=i(451),h=i(452),c=function(t,e){return t.x!==e.x?t.x-e.x:t.y!==e.y?t.y-e.y:t.z-e.z};n.v3();function l(t){for(var e=new Array,i=0;i<t.length;i++){var n=t[i];if(n instanceof Number||n instanceof String)e[i]=n;else if(n.clone)e[i]=n.clone();else{if(!(n instanceof Array))throw"数组有元素不能clone";e[i]=l(n)}}return e}function u(t,e){return t.x===e.x?void 0!==t.z&&t.y===e.y?t.z-e.z:t.y-e.y:t.x-e.x}function p(t,e,i){return void 0===i&&(i=!0),i?(t.flat(1/0).forEach((function(t){t.applyQuat(e)})),t):p(l(t),e)}function f(t){t.sort(u);for(var e=new o.Line(t[0],t.get(-1)),i=-1/0,n=-1,r=1;r<t.length-1;r++){var s=t[r],a=e.distancePoint(s).distance;a>i&&(i=a,n=r)}var c=new h.Plane;return c.setFromThreePoint(t[0],t.get(-1),t[n]),c}e.clone=l,e.vectorCompare=u,e.verctorToNumbers=function t(e,i){if(void 0===i&&(i="xyz"),e instanceof Array){var n=[];if(void 0!==e[0].x&&void 0!==e[0].y&&void 0!==e[0].z)for(var r=0;r<e.length;r++)for(var o=0;o<i.length;o++)n.push(e[r][i[o]]);else if(void 0!==e[0].x&&void 0!==e[0].y)for(r=0;r<e.length;r++)n.push(e[r].x),n.push(e[r].y);else if(e[0]instanceof Array)for(r=0;r<e.length;r++)n=n.concat(t(e[r]));else console.error("数组内部的元素不是向量");return n}console.error("传入参数必须是数组")},e.boundingBox=function(t){for(var e=new n.Vec3(1/0,1/0,1/0),i=new n.Vec3(-1/0,-1/0,-1/0),r=0;r<t.length;r++)e.min(t[r]),i.max(t[r]);return[e,i]},e.applyQuat=p,e.translate=function t(e,i,n){return void 0===n&&(n=!0),n?(e.flat(1/0).forEach((function(t){t.add(i)})),e):t(l(e),i)},e.rotate=function(t,e,i,n){return void 0===n&&(n=!0),p(t,(new a.Quat).setFromAxisAngle(e,i),n)},e.rotateByUnitVectors=function(t,e,i,n){return void 0===n&&(n=!0),p(t,(new a.Quat).setFromUnitVecs(e,i),n)},e.scale=function t(e,i,n){return void 0===n&&(n=!0),n?(e.flat(1/0).forEach((function(t){t.scale.multiply(i)})),e):t(l(e),i)},e.applyMatrix4=function t(e,i,n){return void 0===n&&(n=!0),n?(e.flat(1/0).forEach((function(t){t.applyMatrix4(i)})),e):t(l(e),i)},e.simplifyPointList=function(t,e,i){void 0===e&&(e=.1),void 0===i&&(i=Math.PI/180*5);for(var n=0;n<t.length;n++){var r=t[n],o=t[n+1];r.distanceTo(o)<e&&(0===n?t.remove(n+1,1):n===t.length-2?t.splice(n,1):t.splice(n,2,r.clone().add(o).multiplyScalar(.5)),n--)}for(n=1;n<t.length-1;n++){var s=t[n-1];r=t[n],o=t[n+1];Math.acos(r.clone().sub(s).normalize().dot(o.clone().sub(r).normalize()))<i&&(t.splice(n,1),n--)}return t},e.reverseOnPlane=function(t,e){},e.projectOnPlane=function(t,e,i){return t},e.recognitionPlane=f,e.isInOnePlane=function(t,e){void 0===e&&(e=r.gPrecision);for(var i=f(t),n=0;n<t.length;n++){var o=t[n];if(i.distancePoint(o)>=e)return!1}return i},e.pointsCollinear=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.sort(c);for(var i=t[t.length-1].clone().sub(t[0]),n=t[t.length-1].distanceTo(t[0]),o=1;o<t.length-1;o++){var s=t[o].distanceTo(t[0]),a=t[o].distanceTo(t[t.length-1]);if(s<a){if(Math.abs(t[o].clone().sub(t[0]).dot(i)-n*s)>r.gPrecision)return!1}else if(Math.abs(t[o].clone().sub(t[t.length-1]).dot(i)-n*a)>r.gPrecision)return!1}return!0},e.calcCircleFromThreePoint=function(t,e,i){return(new s.Circle).setFrom3Points(t,e,i)},e.angle=function(t,e,i){return t.angleTo(e,i)}},459:function(t,e,i){"use strict";i(445),i(516),i(438),i(447),i(448),i(234),i(436);var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.extrudeNext=e.EndType=e.JoinType=e.isCCW=e.extrude=e.links=e.linkSides=e.linkSide=void 0;var r=i(435),o=i(491),s=i(517),a=i(519),h=i(458),c=i(521),l=i(522),u=i(529),p=i(444),f=i(581),y=i(452),d=i(530);function v(t,e,i){if(void 0===i&&(i=!1),t.length!==e.length)throw"拉伸两边的点数量不一致  linkSide";if(t.length<2||e.length<2)return[];t.length;var n=t.length,r=i?t.length:t.length-1,o=[];if(t[0]instanceof Number)for(var s=0;s<r;s++){var a=t[s],h=t[(s+1)%n],c=e[s],l=e[(s+1)%n];o.push(a),o.push(c),o.push(l),o.push(a),o.push(l),o.push(h)}else if(void 0!==t[0].index)for(s=0;s<r;s++){a=t[s],h=t[(s+1)%n],c=e[s],l=e[(s+1)%n];o.push(a.index),o.push(c.index),o.push(l.index),o.push(a.index),o.push(l.index),o.push(h.index)}else for(s=0;s<r;s++){a=t[s],h=t[(s+1)%n],c=e[s],l=e[(s+1)%n];o.push(a),o.push(c),o.push(l),o.push(a),o.push(h),o.push(l)}return o}function m(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);for(var n=i?t.length:t.length-1,r=[],o=0;o<n;o++)r.push.apply(r,v(t[o],t[(o+1)%t.length],e));return r}e.linkSide=v,e.linkSides=m,e.links=function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),m(t,e=t[0]instanceof s.Polyline||e,i)};var g={sectionClosed:!1,pathClosed:!1,textureEnable:!0,textureScale:new o.Vec2(1,1),smoothAngle:Math.PI/180*30,sealStart:!1,sealEnd:!1,normal:r.Vec3.UnitZ,vecdim:3};e.extrude=function(t,e,i){if(void 0===i&&(i=g),i=n(n({},g),i),e.length<2)throw"路径节点数必须大于2";f.recognitionCCW(t)||t.reverse();for(var o=i.normal,s=p.clone(t),y=new a.Path(t),d=0,v=1;v<y.length-1;v++)Math.acos(y[v].tangent.dot(y[v+1].tangent))>i.smoothAngle&&t.splice(v+d++,0,y[v].clone());if(i.isClosed){var _=y.get(-1).clone().sub(y.get(-2)).normalize(),x=y[0].clone().sub(y.get(-1)).normalize();Math.acos(_.dot(x))>i.smoothAngle&&t.push(t.get(-1).clone()),t.unshift(t[0].clone())}var b=e;!(b instanceof a.Path)&&b instanceof Array&&(b=new a.Path(e));var M=[];for(v=0;v<b.length;v++){var w=b[v],z=w.tangent,P=p.clone(t);if(h.rotateByUnitVectors(P,o,z),i.fixedY){var S=r.Vec3.UnitX;h.rotateByUnitVectors([S],o,z),(C=S.clone()).y=0,h.rotateByUnitVectors(P,S,C)}c.translate(P,w),M.push(P)}var O={index:0},A=p.flat(M);l.indexable(A,O);var j=m(M,i.isClosed,i.isClosed2);y=new a.Path(t);var k=[];for(v=0;v<b.length;v++)for(var V=0;V<y.length;V++)k.push(y[V].tlen*i.textureScale.x,b[v].tlen*i.textureScale.y);var q=p.clone(s);o.dot(r.Vec3.UnitZ)<.9999&&h.rotateByUnitVectors(q,o,r.Vec3.UnitZ);var T=p.clone(s);if(h.rotateByUnitVectors(s,o,b[0].tangent),i.fixedY){S=r.Vec3.UnitX;h.rotateByUnitVectors([S],o,b[0].tangent),(C=S.clone()).y=0,h.rotateByUnitVectors(s,S,C)}if(c.translate(s,b[0]),h.rotateByUnitVectors(T,o,b.get(-1).tangent),i.fixedY){var C;S=r.Vec3.UnitX;h.rotateByUnitVectors([S],o,b.get(-1).tangent),(C=S.clone()).y=0,h.rotateByUnitVectors(T,S,C)}c.translate(T,b.get(-1));var F=u.triangulation(q,[],{normal:o});F.reverse(),i.sealStart&&l.indexable(s,O),i.sealEnd&&l.indexable(T,O);var E=[],N=A.length;if(i.sealStart)for(v=0;v<F.length;v++)F[v]+=N;if(i.sealEnd&&!i.sealStart)for(v=0;v<F.length;v++)E[v]=F[v]+N;if(i.sealEnd&&i.sealStart)for(v=0;v<F.length;v++)E[v]=F[v]+s.length;if(i.sealStart){A.push.apply(A,s),j.push.apply(j,F);for(v=0;v<q.length;v++)k.push(q[v].x,q[v].y)}if(i.sealEnd){A.push.apply(A,T),E.reverse(),j.push.apply(j,E);for(v=0;v<q.length;v++)k.push(q[v].x,q[v].y)}return{vertices:A,triangles:j,uvs:k}},e.isCCW=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i],r=t[(i+1)%t.length];e+=-.5*(r.y+n.y)*(r.x-n.x)}return e>0},function(t){t[t.Bevel=0]="Bevel",t[t.Round=1]="Round",t[t.Miter=2]="Miter"}(e.JoinType||(e.JoinType={})),function(t){t[t.Square=0]="Square",t[t.Round=1]="Round",t[t.Butt=2]="Butt"}(e.EndType||(e.EndType={})),e.extrudeNext=function(t,e,i){void 0===i&&(i=g);var n=[];if(!isNaN(t[0])){for(var o=["x","y","z"],s=0;s<t.length;s+=i.vecdim){for(var h=new r.Vec3,l=0;l<i.vecdim;l++)h[o[l]]=t[s+l];n.push(h)}t=n}f.recognitionCCW(t)||t.reverse(),i.normal||(i.normal=f.recognitionPlane(t).normal),i.center&&c.translate(t,i.center);var u=new a.Path(t),v=0;for(s=1;s<u.length-1;s++)Math.acos(u[s].tangent.dot(u[s+1].tangent))>i.smoothAngle&&t.splice(s+v++,0,u[s].clone());for(i.sealStart,i.sealEnd,s=0;s<t.length;s++){var m=t[s];m.u=m.tlen;for(var _=[],x=1;x<e.length-1;x++){var b=e[x],M=(b.tangent,p.clone(t)),w=e[x+1].clone().sub(e[x]).normalize().add(e[x].clone().sub(e[x-1]).normalize()).normalize(),z=y.Plane.setFromPointNormal(b,w);z.negate();var P=r.v3().subVecs(b,e[x-1]).normalize();c.projectOnPlane(M,z,P),_.push(M)}d.linksToGeometry(_)}}},489:function(t,e,i){"use strict";i(141),i(234);var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),i(444),r(i(491),e),r(i(435),e),r(i(569),e),r(i(570),e),r(i(514),e),r(i(451),e),r(i(437),e),r(i(571),e),r(i(458),e),r(i(573),e),r(i(459),e),r(i(583),e),r(i(586),e),r(i(587),e),r(i(515),e),r(i(588),e),r(i(440),e),r(i(519),e),r(i(452),e),r(i(589),e),r(i(517),e),r(i(590),e),r(i(591),e),r(i(442),e),r(i(592),e),r(i(532),e),r(i(533),e),r(i(530),e)},491:function(t,e,i){"use strict";i(141),i(234),i(142),i(436);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.v2=e.Vec2=void 0;var o=i(450),s=i(457),a=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.call(this)||this;return n._x=e,n._y=i,n.isVec2=!0,s.buildAccessors(["x","y"],n),n}return r(e,t),e.isVec2=function(t){return!isNaN(t.x)&&!isNaN(t.y)&&isNaN(t.z)&&isNaN(t.w)},Object.defineProperty(e.prototype,"width",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.y},set:function(t){this.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UnitX",{get:function(){return new e(1,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UnitY",{get:function(){return new e(0,1)},enumerable:!1,configurable:!0}),e.prototype.set=function(t,e){return this.x=t,this.y=e,this},e.prototype.setScalar=function(t){return this.x=t,this.y=t,this},e.prototype.setX=function(t){return this.x=t,this},e.prototype.setY=function(t){return this.y=t,this},e.prototype.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},e.prototype.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.add=function(t,e){return void 0!==e?(console.warn("Vec2: .add() now only accepts one argument. Use .addVecs( a, b ) instead."),this.addVecs(t,e)):(this.x+=t.x,this.y+=t.y,this)},e.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},e.prototype.addVecs=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},e.prototype.addScaledVec=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},e.prototype.sub=function(t,e){return void 0!==e?(console.warn("Vec2: .sub() now only accepts one argument. Use .subVecs( a, b ) instead."),this.subVecs(t,e)):(this.x-=t.x,this.y-=t.y,this)},e.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this},e.prototype.subVecs=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},e.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},e.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},e.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},e.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},e.prototype.applyMat3=function(t){var e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this},e.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},e.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},e.prototype.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},e.prototype.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},e.prototype.clampLength=function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},e.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},e.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},e.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},e.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.cross=function(t){return this.x*t.y-this.y*t.x},e.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)},e.prototype.normalize=function(){return this.divideScalar(this.length()||1)},e.prototype.angle=function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},e.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},e.prototype.distanceToSquared=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},e.prototype.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},e.prototype.setLength=function(t){return this.normalize().multiplyScalar(t)},e.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},e.prototype.lerpVecs=function(t,e,i){return this.subVecs(e,t).multiplyScalar(i).add(t)},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},e.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},e.prototype.fromBufferAttribute=function(t,e,i){return void 0!==i&&console.warn("Vec2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},e.prototype.rotateAround=function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this},e}(o.EventHandler);e.Vec2=a,e.v2=function(){return new a}},514:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.m4=e.Mat4=void 0;var n=i(435),r=function(){function t(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.isMat4=!0,arguments.length>0&&console.error(" Mat4: the constructor no longer reads arguments. use .set() instead.")}return t.prototype.set=function(t,e,i,n,r,o,s,a,h,c,l,u,p,f,y,d){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=n,v[1]=r,v[5]=o,v[9]=s,v[13]=a,v[2]=h,v[6]=c,v[10]=l,v[14]=u,v[3]=p,v[7]=f,v[11]=y,v[15]=d,this},Object.defineProperty(t,"Identity",{get:function(){return new t},enumerable:!1,configurable:!0}),t.prototype.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},t.prototype.clone=function(){return(new t).fromArray(this.elements)},t.prototype.copy=function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},t.prototype.copyPosition=function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},t.prototype.extractBasis=function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},t.prototype.makeBasis=function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},t.prototype.extractRotation=function(t){var e=this.elements,i=t.elements,n=1/o.setFromMatrixColumn(t,0).length(),r=1/o.setFromMatrixColumn(t,1).length(),s=1/o.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},t.prototype.makeRotationFromEuler=function(t){t&&t.isEuler||console.error(" Mat4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vec3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(n),h=Math.sin(n),c=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){var u=o*c,p=o*l,f=s*c,y=s*l;e[0]=a*c,e[4]=-a*l,e[8]=h,e[1]=p+f*h,e[5]=u-y*h,e[9]=-s*a,e[2]=y-u*h,e[6]=f+p*h,e[10]=o*a}else if("YXZ"===t.order){var d=a*c,v=a*l,m=h*c,g=h*l;e[0]=d+g*s,e[4]=m*s-v,e[8]=o*h,e[1]=o*l,e[5]=o*c,e[9]=-s,e[2]=v*s-m,e[6]=g+d*s,e[10]=o*a}else if("ZXY"===t.order){d=a*c,v=a*l,m=h*c,g=h*l;e[0]=d-g*s,e[4]=-o*l,e[8]=m+v*s,e[1]=v+m*s,e[5]=o*c,e[9]=g-d*s,e[2]=-o*h,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){u=o*c,p=o*l,f=s*c,y=s*l;e[0]=a*c,e[4]=f*h-p,e[8]=u*h+y,e[1]=a*l,e[5]=y*h+u,e[9]=p*h-f,e[2]=-h,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var _=o*a,x=o*h,b=s*a,M=s*h;e[0]=a*c,e[4]=M-_*l,e[8]=b*l+x,e[1]=l,e[5]=o*c,e[9]=-s*c,e[2]=-h*c,e[6]=x*l+b,e[10]=_-M*l}else if("XZY"===t.order){_=o*a,x=o*h,b=s*a,M=s*h;e[0]=a*c,e[4]=-l,e[8]=h*c,e[1]=_*l+M,e[5]=o*c,e[9]=x*l-b,e[2]=b*l-x,e[6]=s*c,e[10]=M*l+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},t.prototype.makeRotationFromQuat=function(t){return this.compose(a,t,h)},t.prototype.lookAt=function(t,e,i){var n=this.elements;return u.subVecs(t,e),0===u.lengthSq()&&(u.z=1),u.normalize(),c.crossVecs(i,u),0===c.lengthSq()&&(1===Math.abs(i.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),c.crossVecs(i,u)),c.normalize(),l.crossVecs(u,c),n[0]=c.x,n[4]=l.x,n[8]=u.x,n[1]=c.y,n[5]=l.y,n[9]=u.y,n[2]=c.z,n[6]=l.z,n[10]=u.z,this},t.prototype.multiply=function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},t.prototype.premultiply=function(t){return this.multiplyMatrices(t,this)},t.prototype.multiplyMatrices=function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[4],a=i[8],h=i[12],c=i[1],l=i[5],u=i[9],p=i[13],f=i[2],y=i[6],d=i[10],v=i[14],m=i[3],g=i[7],_=i[11],x=i[15],b=n[0],M=n[4],w=n[8],z=n[12],P=n[1],S=n[5],O=n[9],A=n[13],j=n[2],k=n[6],V=n[10],q=n[14],T=n[3],C=n[7],F=n[11],E=n[15];return r[0]=o*b+s*P+a*j+h*T,r[4]=o*M+s*S+a*k+h*C,r[8]=o*w+s*O+a*V+h*F,r[12]=o*z+s*A+a*q+h*E,r[1]=c*b+l*P+u*j+p*T,r[5]=c*M+l*S+u*k+p*C,r[9]=c*w+l*O+u*V+p*F,r[13]=c*z+l*A+u*q+p*E,r[2]=f*b+y*P+d*j+v*T,r[6]=f*M+y*S+d*k+v*C,r[10]=f*w+y*O+d*V+v*F,r[14]=f*z+y*A+d*q+v*E,r[3]=m*b+g*P+_*j+x*T,r[7]=m*M+g*S+_*k+x*C,r[11]=m*w+g*O+_*V+x*F,r[15]=m*z+g*A+_*q+x*E,this},t.prototype.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},t.prototype.applyToBufferAttribute=function(t){for(var e=0,i=t.count;e<i;e++)o.x=t.getX(e),o.y=t.getY(e),o.z=t.getZ(e),o.applyMat4(this),t.setXYZ(e,o.x,o.y,o.z);return t},t.prototype.determinant=function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],s=t[5],a=t[9],h=t[13],c=t[2],l=t[6],u=t[10],p=t[14];return t[3]*(+r*a*l-n*h*l-r*s*u+i*h*u+n*s*p-i*a*p)+t[7]*(+e*a*p-e*h*u+r*o*u-n*o*p+n*h*c-r*a*c)+t[11]*(+e*h*l-e*s*p-r*o*l+i*o*p+r*s*c-i*h*c)+t[15]*(-n*s*c-e*a*l+e*s*u+n*o*l-i*o*u+i*a*c)},t.prototype.transpose=function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},t.prototype.setPosition=function(t,e,i){var n=this.elements;return t.isVec3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this},t.prototype.getInverse=function(t,e){var i=this.elements,n=t.elements,r=n[0],o=n[1],s=n[2],a=n[3],h=n[4],c=n[5],l=n[6],u=n[7],p=n[8],f=n[9],y=n[10],d=n[11],v=n[12],m=n[13],g=n[14],_=n[15],x=f*g*u-m*y*u+m*l*d-c*g*d-f*l*_+c*y*_,b=v*y*u-p*g*u-v*l*d+h*g*d+p*l*_-h*y*_,M=p*m*u-v*f*u+v*c*d-h*m*d-p*c*_+h*f*_,w=v*f*l-p*m*l-v*c*y+h*m*y+p*c*g-h*f*g,z=r*x+o*b+s*M+a*w;if(0===z){var P=" Mat4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(P);return console.warn(P),this.identity()}var S=1/z;return i[0]=x*S,i[1]=(m*y*a-f*g*a-m*s*d+o*g*d+f*s*_-o*y*_)*S,i[2]=(c*g*a-m*l*a+m*s*u-o*g*u-c*s*_+o*l*_)*S,i[3]=(f*l*a-c*y*a-f*s*u+o*y*u+c*s*d-o*l*d)*S,i[4]=b*S,i[5]=(p*g*a-v*y*a+v*s*d-r*g*d-p*s*_+r*y*_)*S,i[6]=(v*l*a-h*g*a-v*s*u+r*g*u+h*s*_-r*l*_)*S,i[7]=(h*y*a-p*l*a+p*s*u-r*y*u-h*s*d+r*l*d)*S,i[8]=M*S,i[9]=(v*f*a-p*m*a-v*o*d+r*m*d+p*o*_-r*f*_)*S,i[10]=(h*m*a-v*c*a+v*o*u-r*m*u-h*o*_+r*c*_)*S,i[11]=(p*c*a-h*f*a-p*o*u+r*f*u+h*o*d-r*c*d)*S,i[12]=w*S,i[13]=(p*m*s-v*f*s+v*o*y-r*m*y-p*o*g+r*f*g)*S,i[14]=(v*c*s-h*m*s-v*o*l+r*m*l+h*o*g-r*c*g)*S,i[15]=(h*f*s-p*c*s+p*o*l-r*f*l-h*o*y+r*c*y)*S,this},t.prototype.scale=function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},t.prototype.getMaxScaleOnAxis=function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},t.prototype.makeTranslation=function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},t.prototype.makeRotationX=function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},t.prototype.makeRotationY=function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},t.prototype.makeRotationZ=function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},t.prototype.makeRotationAxis=function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,s=t.y,a=t.z,h=r*o,c=r*s;return this.set(h*o+i,h*s-n*a,h*a+n*s,0,h*s+n*a,c*s+i,c*a-n*o,0,h*a-n*s,c*a+n*o,r*a*a+i,0,0,0,0,1),this},t.prototype.makeScale=function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},t.prototype.makeShear=function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},t.prototype.compose=function(t,e,i){var n=this.elements,r=e._x,o=e._y,s=e._z,a=e._w,h=r+r,c=o+o,l=s+s,u=r*h,p=r*c,f=r*l,y=o*c,d=o*l,v=s*l,m=a*h,g=a*c,_=a*l,x=i.x,b=i.y,M=i.z;return n[0]=(1-(y+v))*x,n[1]=(p+_)*x,n[2]=(f-g)*x,n[3]=0,n[4]=(p-_)*b,n[5]=(1-(u+v))*b,n[6]=(d+m)*b,n[7]=0,n[8]=(f+g)*M,n[9]=(d-m)*M,n[10]=(1-(u+y))*M,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},t.prototype.decompose=function(t,e,i){var n=this.elements,r=o.set(n[0],n[1],n[2]).length(),a=o.set(n[4],n[5],n[6]).length(),h=o.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],s.copy(this);var c=1/r,l=1/a,u=1/h;return s.elements[0]*=c,s.elements[1]*=c,s.elements[2]*=c,s.elements[4]*=l,s.elements[5]*=l,s.elements[6]*=l,s.elements[8]*=u,s.elements[9]*=u,s.elements[10]*=u,e.setFromRotationMatrix(s),i.x=r,i.y=a,i.z=h,this},t.prototype.makePerspective=function(t,e,i,n,r,o){void 0===o&&console.warn(" Mat4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*r/(e-t),h=2*r/(i-n),c=(e+t)/(e-t),l=(i+n)/(i-n),u=-(o+r)/(o-r),p=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=h,s[9]=l,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},t.prototype.makeOrthographic=function(t,e,i,n,r,o){var s=this.elements,a=1/(e-t),h=1/(i-n),c=1/(o-r),l=(e+t)*a,u=(i+n)*h,p=(o+r)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-l,s[1]=0,s[5]=2*h,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},t.prototype.equals=function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},t.prototype.fromArray=function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},t.prototype.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t},t}();e.Mat4=r;var o=n.v3(),s=p(),a=n.v3(0,0,0),h=n.v3(1,1,1),c=n.v3(),l=n.v3(),u=n.v3();function p(){return new r}e.m4=p},515:function(t,e,i){"use strict";i(234),i(436),Object.defineProperty(e,"__esModule",{value:!0}),e.circle=e.Circle=void 0;var n=i(435),r=i(458),o=i(440),s=function(){function t(t,e,i){void 0===t&&(t=new n.Vec3),void 0===e&&(e=0),void 0===i&&(i=n.Vec3.UnitY),this.center=t,this.radius=e,this.normal=i,this.startAngle=0,this.endAngle=2*Math.PI,this.radiusSqr=0}return t.prototype.area=function(){return Math.PI*this.radius*this.radius},t.prototype.arc1=function(t,e,i,n){this.setFrom3Points(t,e,i),this.startAngle=0,this.endAngle=r.angle(t.clone().sub(this.center).normalize(),e.clone().sub(this.center).normalize(),this.normal||n)},t.prototype.arc2=function(t,e,i,n,o){void 0===n&&(n=!1),this.radius=e.distanceTo(t),this.center.copy(t);var s=i.clone().sub(t),a=e.clone().sub(t);r.angle(a,s)},t.prototype.setFrom3Points=function(t,e,i,n){var r=e.clone().sub(t),s=i.clone().sub(t),a=e.clone().add(t).multiplyScalar(.5),h=i.clone().add(t).multiplyScalar(.5);n=n||r.clone().cross(s).normalize(),r.applyAxisAngle(n,Math.PI/2),s.applyAxisAngle(n,Math.PI/2);var c=new o.Line(a,a.clone().add(r)),l=new o.Line(h,h.clone().add(s)),u=c.distanceLine(l).closests[0],p=t.distanceToSquared(u);return this.center=u,this.radiusSqr=p,this.radius=Math.sqrt(p),this.normal=n,this},t}();e.Circle=s,e.circle=function(t,e,i){return new s(t,e,i)}},517:function(t,e,i){"use strict";i(143),i(141),i(234),i(142),i(436),i(144);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Polyline=void 0;var o=i(459),s=i(437),a=i(435),h=i(518),c=i(440),l=i(442),u=function(t){function e(i,n){void 0===i&&(i=[]),void 0===n&&(n=a.Vec3.UnitY);var r=t.call(this)||this;return r.normal=n,r.isPolyline=!0,Object.setPrototypeOf(r,e.prototype),r.push.apply(r,i),r.isCoPlanar=!0,r}return r(e,t),e.prototype.offset=function(t,i,n,r){void 0===i&&(i=a.Vec3.UnitY),void 0===n&&(n=o.EndType.Butt),void 0===r&&(r=o.JoinType.Miter);for(var h=[],c=function(e){var n=new l.Segment(u[e].clone(),u[e+1].clone()),r=n[1].clone().sub(n[0]).normalize().applyAxisAngle(i,Math.PI/2).multiplyScalar(t);n.forEach((function(t){return t.add(r)})),h.push(n)},u=this,p=0;p<this.length-1;p++)c(p);for(p=0;p<h.length-1;p++)for(var f=h[p],y=p+1;y<h.length;y++){var d=h[y],v=f.distanceSegment(d);v.distance<s.gPrecision&&(d[0].copy(v.closests[0]),f[1].copy(v.closests[0]))}var m=[];m.push(h[0].p0);for(p=0;p<h.length;p++){var g=h[p];m.push(g.p1)}return new e(m)},e.prototype.corner=function(t,i){void 0===i&&(i=this.normal);for(var n=new e,r=0;r<this.length-2;r++){var o=this[r],s=this[r+1],a=this[r+2];n.push(o);var h=o.distanceTo(s)<=2*t?o.clone().add(s).multiplyScalar(.5):o.clone().sub(s).normalize().multiplyScalar(t).add(s),l=a.distanceTo(s)<=2*t?a.clone().add(s).multiplyScalar(.5):a.clone().sub(s).normalize().multiplyScalar(t).add(s);n.push(h);var u=s.clone().sub(o).applyAxisAngle(i,Math.PI/2),p=s.clone().sub(o).applyAxisAngle(i,Math.PI/2);new c.Line(h,u.add(h)),new c.Line(l,p.add(l));n.push(l)}return n},e}(h.ArrayEx);e.Polyline=u},518:function(t,e,i){"use strict";i(446),i(438),i(448),i(141),i(234),i(142);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayEx=void 0;var o=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.apply(this,e)||this}return r(e,t),Object.defineProperty(e.prototype,"last",{get:function(){return this.get(-1)},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return t<0&&(t=this.length+t),this[t]},e.prototype.forall=function(t){for(var e=0;e<this.length;e++)t(this[e]),this[e]instanceof Array&&this[e].forall(t)},e.prototype.clone=function(){for(var t=new e,i=0;i<this.length;i++){var n=this[i];if(n instanceof Number||n instanceof String)t[i]=n;else{if(!n.clone)throw"数组有元素不能clone";t[i]=n.clone()}}return t},e.prototype.classify=function(t){for(var e=[],i=0;i<this.length;i++)for(var n=0;n<e.length;n++)t(this[i],e[n][0],e[n])?e[n].push(this[i]):e.push([this[i]]);return e},e.prototype.unique=function(t,e){if(e){this.sort(e);for(var i=0;i<this.length;i++)for(var n=i+1;n<this.length&&!0===t(this[i],this[n]);n++)this.splice(n,1),n--;return this}for(i=0;i<this.length;i++)for(n=i+1;n<this.length;n++)!0===t(this[i],this[n])&&(this.splice(n,1),n--);return this},e}(Array);e.ArrayEx=o},519:function(t,e,i){"use strict";i(141),i(234),i(142),i(436);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var o=i(435),s=i(437),a=function(t){function e(i){var n=t.call(this,i)||this;return Object.setPrototypeOf(n,e.prototype),n._closed=!1,n.init(),n}return r(e,t),Object.defineProperty(e.prototype,"closed",{get:function(){return this._closed},set:function(t){this._closed=t},enumerable:!1,configurable:!0}),e.prototype.init=function(){if(0!==this.length){this[0].len=0,this[0].tlen=0,this[0].direction=this[1].clone().sub(this[0]).normalize();for(var t=1;t<this.length;t++){var e=this[t];e.len=this[t].distanceTo(this[t-1]),e.tlen=this[t-1].tlen+e.len,this[t].direction=this[t].clone().sub(this[t-1]).normalize()}this._closed&&this.get(-1).direction.copy(this[0]).sub(this.get(-1)).normalize();for(t=0;t<this.length+2;t++)this[t%this.length].tangent=this[t%this.length].direction.clone();this._closed||(this[0].tangent.copy(this[0].direction),this.get(-1).tangent.copy(this.get(-1).direction))}},Object.defineProperty(e.prototype,"tlen",{get:function(){return 0===this.length?0:Math.max(this.get(-1).tlen,this[0].tlen)},enumerable:!1,configurable:!0}),e.prototype.splitByFromToDistance=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),i<=t)return null;for(var n=new e([]),r=0;r<this.length-1;r++){var s=this[r],a=this[r+1];if(s.tlen<=t&&a.tlen>=t){var h=(new o.Vec3).lerpVecs(s,a,(t-s.tlen)/(a.tlen-s.tlen));n.add(h)}if(s.tlen>t&&s.tlen<i&&n.add(s.clone()),s.tlen<=i&&a.tlen>=i){h=(new o.Vec3).lerpVecs(s,a,(i-s.tlen)/(a.tlen-s.tlen));return n.add(h),n}}return n},e.prototype.getPointByDistance=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length-1);var n=s.clamp(t,0,this.get(-1).tlen);if(n!==t)return null;if(i-e==1)return{isNode:!1,point:(new o.Vec3).lerpVecs(this[e],this[i],(n-this[e].tlen)/this[i].len)};var r=e+i>>1;return this[r].tlen>n?this.getPointByDistance(n,e,r):this[r].tlen<n?this.getPointByDistance(n,r,i):{isNode:!0,point:(new o.Vec3).lerpVecs(this[e],this[i],(n-this[e].tlen)/this[i].len)}},e.prototype.getPointByDistancePure=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=this.length-1);var n=s.clamp(t,0,this.get(-1).tlen);if(n!==t)return null;if(i-e==1)return(new o.Vec3).lerpVecs(this[e],this[i],(n-this[e].tlen)/this[i].len);var r=e+i>>1;return this[r].tlen>n?this.getPointByDistancePure(n,e,r):this[r].tlen<n?this.getPointByDistancePure(n,r,i):this[r].clone()},e.prototype.splitAverage=function(t){for(var i=this.last.tlen/t,n=[],r=0,s=0;s<=t;s++)for(var a=s*i,h=r;h<this.length-1;h++)if(this[h].tlen<=a&&this[h+1].tlen>=a){var c=(new o.Vec3).lerpVecs(this[h],this[h+1],(a-this[h].tlen)/this[h+1].len);n.push(c),r=h;break}return new e(n)},e.prototype.splitAverageLength=function(t,e){void 0===e&&(e=!0);var i=this.last.tlen/t;return e&&(i=Math.round(i)),this.splitAverage(i)},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0==this.length){var i=t.shift();this.push(i),this[0].len=0,this[0].tlen=0}for(var n=0;n<t.length;n++){var r=t[n];r.len=r.distanceTo(this.get(-1)),r.tlen=this.get(-1).tlen+r.len,r.direction=r.clone().sub(this.get(-1)).normalize(),this.get(-1).direction?this.get(-1).direction.copy(r.direction):this.get(-1).direction=r.clone().sub(this.get(-1)).normalize(),this.push(r)}},e}(i(520).Polyline);e.Path=a},520:function(t,e,i){"use strict";i(143),i(141),i(234),i(142),i(436),i(144);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Polyline=void 0;var o=i(459),s=i(437),a=i(435),h=i(518),c=i(440),l=i(442),u=function(t){function e(i,n){void 0===i&&(i=[]),void 0===n&&(n=a.Vec3.UnitY);var r=t.call(this)||this;return r.normal=n,r.isPolyline=!0,Object.setPrototypeOf(r,e.prototype),r.push.apply(r,i),r.isCoPlanar=!0,r}return r(e,t),e.prototype.offset=function(t,i,n,r){void 0===i&&(i=a.Vec3.UnitY),void 0===n&&(n=o.EndType.Butt),void 0===r&&(r=o.JoinType.Miter);for(var h=[],c=function(e){var n=new l.Segment(u[e].clone(),u[e+1].clone()),r=n[1].clone().sub(n[0]).normalize().applyAxisAngle(i,Math.PI/2).multiplyScalar(t);n.forEach((function(t){return t.add(r)})),h.push(n)},u=this,p=0;p<this.length-1;p++)c(p);for(p=0;p<h.length-1;p++)for(var f=h[p],y=p+1;y<h.length;y++){var d=h[y],v=f.distanceSegment(d);v.distance<s.gPrecision&&(d[0].copy(v.closests[0]),f[1].copy(v.closests[0]))}var m=[];m.push(h[0].p0);for(p=0;p<h.length;p++){var g=h[p];m.push(g.p1)}return new e(m)},e.prototype.corner=function(t,i){void 0===i&&(i=this.normal);for(var n=new e,r=0;r<this.length-2;r++){var o=this[r],s=this[r+1],a=this[r+2];n.push(o);var h=o.distanceTo(s)<=2*t?o.clone().add(s).multiplyScalar(.5):o.clone().sub(s).normalize().multiplyScalar(t).add(s),l=a.distanceTo(s)<=2*t?a.clone().add(s).multiplyScalar(.5):a.clone().sub(s).normalize().multiplyScalar(t).add(s);n.push(h);var u=s.clone().sub(o).applyAxisAngle(i,Math.PI/2),p=s.clone().sub(o).applyAxisAngle(i,Math.PI/2);new c.Line(h,u.add(h)),new c.Line(l,p.add(l));n.push(l)}return n},e}(h.ArrayEx);e.Polyline=u},521:function(t,e,i){"use strict";i(240),i(445),i(143),i(446),i(438),i(447),i(234),i(436),i(144),Object.defineProperty(e,"__esModule",{value:!0}),e.isInOnePlane=e.recognitionPlane=e.projectOnPlane=e.reverseOnPlane=e.simplifyPointList=e.applyMat4=e.scale=e.rotateByUnitVecs=e.rotate=e.translate=e.applyQuat=e.boundingBox=e.verctorToNumbers=e.VecCompare=void 0;var n=i(451),r=i(444),o=i(435),s=i(437),a=i(440),h=i(452);o.v3();function c(t,e){return t.x===e.x?void 0!==t.z&&t.y===e.y?t.z-e.z:t.y-e.y:t.x-e.x}function l(t,e,i){return void 0===i&&(i=!0),i?(t.flat(1/0).forEach((function(t){t.applyQuat(e)})),t):l(r.clone(t),e)}function u(t){t.sort(c);for(var e=new a.Line(t[0],t.get(-1)),i=-1/0,n=-1,r=1;r<t.length-1;r++){var o=t[r],s=e.distancePoint(o).distance;s>i&&(i=s,n=r)}var l=new h.Plane;return l.setFromThreePoint(t[0],t.get(-1),t[n]),l}e.VecCompare=c,e.verctorToNumbers=function t(e,i){if(void 0===i&&(i="xyz"),e instanceof Array){var n=[];if(void 0!==e[0].x&&void 0!==e[0].y&&void 0!==e[0].z)for(var r=0;r<e.length;r++)for(var o=0;o<i.length;o++)n.push(e[r][i[o]]);else if(void 0!==e[0].x&&void 0!==e[0].y)for(r=0;r<e.length;r++)n.push(e[r].x),n.push(e[r].y);else if(e[0]instanceof Array)for(r=0;r<e.length;r++)n=n.concat(t(e[r]));else console.error("数组内部的元素不是向量");return n}console.error("传入参数必须是数组")},e.boundingBox=function(t){for(var e=new o.Vec3(1/0,1/0,1/0),i=new o.Vec3(-1/0,-1/0,-1/0),n=0;n<t.length;n++)e.min(t[n]),i.max(t[n]);return[e,i]},e.applyQuat=l,e.translate=function t(e,i,n){return void 0===n&&(n=!0),n?(e.flat(1/0).forEach((function(t){t.add(i)})),e):t(r.clone(e))},e.rotate=function(t,e,i,r){return void 0===r&&(r=!0),l(t,(new n.Quat).setFromAxisAngle(e,i),r)},e.rotateByUnitVecs=function(t,e,i,r){return void 0===r&&(r=!0),l(t,(new n.Quat).setFromUnitVecs(e,i),r)},e.scale=function(t,e,i){return void 0===i&&(i=!0),i?(t.flat(1/0).forEach((function(t){t.scale.multiply(e)})),t):e(r.clone(t))},e.applyMat4=function t(e,i,n){return void 0===n&&(n=!0),n?(e.flat(1/0).forEach((function(t){t.applyMat4(i)})),e):t(r.clone(e),i)},e.simplifyPointList=function(t,e,i){void 0===e&&(e=.1),void 0===i&&(i=Math.PI/180*5);for(var n=0;n<t.length;n++){var r=t[n],o=t[n+1];r.distanceTo(o)<e&&(0===n?t.remove(n+1,1):n===t.length-2?t.splice(n,1):t.splice(n,2,r.clone().add(o).multiplyScalar(.5)),n--)}for(n=1;n<t.length-1;n++){var s=t[n-1];r=t[n],o=t[n+1];Math.acos(r.clone().sub(s).normalize().dot(o.clone().sub(r).normalize()))<i&&(t.splice(n,1),n--)}return t},e.reverseOnPlane=function(t,e){},e.projectOnPlane=function t(e,i,n,o){if(void 0===n&&(n=i.normal),void 0===o&&(o=!0),o){for(var s=0;s<e.length;s++){e[s].projectDirectionOnPlane(i,n)}return e}return t(r.clone(e),i,n)},e.recognitionPlane=u,e.isInOnePlane=function(t,e){void 0===e&&(e=s.gPrecision);for(var i=u(t),n=0;n<t.length;n++){var r=t[n];if(i.distancePoint(r)>=e)return!1}return i}},522:function(t,e,i){"use strict";i(460),i(234),i(11),i(575),i(577),i(493),i(461),i(462),i(463),i(464),i(465),i(466),i(467),i(468),i(469),i(470),i(471),i(472),i(473),i(474),i(475),i(476),i(477),i(478),i(479),i(480),i(481),i(482),i(483),Object.defineProperty(e,"__esModule",{value:!0}),e.toGeoBuffer=e.triangListToBuffer=e.indexable=void 0;var n=i(435),r=i(491),o=i(444);function s(t,e,i){if(void 0===e&&(e={index:0}),void 0===i&&(i=!1),t instanceof Array)for(var n=0;n<t.length;n++)s(t[n],e);else t instanceof Object&&(void 0===t.index||i)&&(t.index=e.index++)}function a(t,e,i){void 0===i&&(i=[]);var o=[];if(n.Vec3.isVec3(t[0]))for(var s=0;s<t.length;s++){var a=t[s];o.push(a.x,a.y,a.z)}else o=t;var h=[];if(i.length>0&&r.Vec2.isVec2(i[0]))for(s=0;s<i.length;s++){var c=i[s];h.push(c.x,c.y)}else h=i;var l=new Float32Array(o);return{vertices:l,uvs:0===h.length?new Float32Array(o.length/3*2):new Float32Array(h),indices:e instanceof Uint32Array||e instanceof Uint16Array?e:new(l.length/3>65535?Uint32Array:Uint16Array)(e)}}e.indexable=s,e.triangListToBuffer=function(t,e){s(e);var i=[];return o.forall(e,(function(t){i.push(t.index)})),a(t,i)},e.toGeoBuffer=a},529:function(t,e,i){"use strict";i(445),i(447),i(234);var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.triangulation=void 0;var s=o(i(580)),a=i(435),h=i(444),c=i(458),l=i(437),u=i(521);e.triangulation=function(t,e,i){void 0===e&&(e=[]),void 0===i&&(i={normal:a.Vec3.UnitZ});var o=null,p=(i=n({feature:"xyz",dim:3},i)).feature,f=i.dim,y=i.normal;y.dot(a.Vec3.UnitZ)<1-l.gPrecision?(o=h.clone(t),c.rotateByUnitVectors(o,y,a.Vec3.UnitZ)):o=t;for(var d=r(o,h.flat(e)),v=u.verctorToNumbers(d,p),m=[],g=o.length,_=-1;_<e.length-1;_++){m.push(g);var x=e[_+1];m.push(g+x.length)}return s.default(v,m,f)}},530:function(t,e,i){"use strict";i(445),i(245),i(447),i(234);var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.trianglutionToGeometryBuffer=e.linksToGeometry=e.linkToGeometry=e.extrudeToGeometryBuffer=e.toGeometryBuffer=void 0;var r=i(522),o=i(435),s=i(459),a=i(529),h=i(444);function c(t,e,i){return void 0===i&&(i=[]),r.toGeoBuffer(t,e,i)}e.toGeometryBuffer=c,e.extrudeToGeometryBuffer=function(t,e,i){var n=s.extrude(t,e,i);return c(n.vertices,n.triangles,n.uvs)},e.linkToGeometry=function(t,e,i){void 0===i&&(i=!1);var o=n(t,e);return r.indexable(o),c(o,s.linkSide(t,e,i))},e.linksToGeometry=function(t,e){void 0===e&&(e=!1);var i=h.flat(t);return r.indexable(i),c(i,s.linkSides(t,e))},e.trianglutionToGeometryBuffer=function(t,e,i){void 0===e&&(e=[]),void 0===i&&(i={normal:o.Vec3.UnitZ});var r=a.triangulation(t,e,i),s=n(t,h.flat(e)),l=[];return s.reduce((function(t,e){return t.push(e.x,e.y),t}),l),c(s,r,l)}},532:function(t,e,i){"use strict";i(494),i(460),i(234),i(11),i(495),i(531),i(493),i(461),i(462),i(463),i(464),i(465),i(466),i(467),i(468),i(469),i(470),i(471),i(472),i(473),i(474),i(475),i(476),i(477),i(478),i(479),i(480),i(481),i(482),i(483),Object.defineProperty(e,"__esModule",{value:!0}),e.Delaunator=void 0;var n=Math.pow(2,-52),r=new Uint32Array(512),o=function(){function t(t){var e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var i=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}return t.from=function(e){for(var i=e.length,n=new Float64Array(i),r=0;r<i;r++){var o=e[r];n[r]=o}return new t(n)},t.fromVecs=function(e){for(var i=[],n=0;n<e.length;n++)i.push(e[n].x,e[n].y);return t.from(i)},t.prototype.update=function(){for(var t=this,e=t.coords,i=t._hullPrev,r=t._hullNext,o=t._hullTri,a=t._hullHash,u=e.length>>1,p=1/0,f=1/0,y=-1/0,d=-1/0,v=0;v<u;v++){(E=e[2*v])<p&&(p=E),(N=e[2*v+1])<f&&(f=N),E>y&&(y=E),N>d&&(d=N),this._ids[v]=v}var m=(p+y)/2,g=(f+d)/2,_=1/0,x=0,b=0,M=0;for(v=0;v<u;v++){(P=s(m,g,e[2*v],e[2*v+1]))<_&&(x=v,_=P)}var w=e[2*x],z=e[2*x+1];_=1/0;for(v=0;v<u;v++){var P;if(v!==x)(P=s(w,z,e[2*v],e[2*v+1]))<_&&P>0&&(b=v,_=P)}var S=e[2*b],O=e[2*b+1],A=1/0;for(v=0;v<u;v++)if(v!==x&&v!==b){var j=c(w,z,S,O,e[2*v],e[2*v+1]);j<A&&(M=v,A=j)}var k=e[2*M],V=e[2*M+1];if(A===1/0){for(v=0;v<u;v++)this._dists[v]=e[2*v]-e[0]||e[2*v+1]-e[1];l(this._ids,this._dists,0,u-1);for(var q=new Uint32Array(u),T=0,C=(v=0,-1/0);v<u;v++){var F=this._ids[v];this._dists[F]>C&&(q[T++]=F,C=this._dists[F])}return this.hull=q.subarray(0,T),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(h(w,z,S,O,k,V)){v=b;var E=S,N=O;b=M,S=k,O=V,M=v,k=E,V=N}var U=function(t,e,i,n,r,o){var s=i-t,a=n-e,h=r-t,c=o-e,l=s*s+a*a,u=h*h+c*c,p=.5/(s*c-a*h);return{x:t+(c*l-a*u)*p,y:e+(s*u-h*l)*p}}(w,z,S,O,k,V);this._cx=U.x,this._cy=U.y;for(v=0;v<u;v++)this._dists[v]=s(e[2*v],e[2*v+1],U.x,U.y);l(this._ids,this._dists,0,u-1),this._hullStart=x;var B=3;r[x]=i[M]=b,r[b]=i[x]=M,r[M]=i[b]=x,o[x]=0,o[b]=1,o[M]=2,a.fill(-1),a[this._hashKey(w,z)]=x,a[this._hashKey(S,O)]=b,a[this._hashKey(k,V)]=M,this.trianglesLen=0,this._addTriangle(x,b,M,-1,-1,-1);for(var I=0,L=void 0,D=void 0;I<this._ids.length;I++){E=e[2*(v=this._ids[I])],N=e[2*v+1];if(I>0){if(void 0===L||void 0===D)continue;if(Math.abs(E-L)<=n&&Math.abs(N-D)<=n)continue}if(L=E,D=N,v!==x&&v!==b&&v!==M){for(var Y=0,Z=(T=0,this._hashKey(E,N));T<this._hashSize&&(-1===(Y=a[(Z+T)%this._hashSize])||Y===r[Y]);T++);for(var R=Y=i[Y],X=void 0;X=r[R],!h(E,N,e[2*R],e[2*R+1],e[2*X],e[2*X+1]);)if((R=X)===Y){R=-1;break}if(-1!==R){var Q=this._addTriangle(R,v,r[R],-1,-1,o[R]);o[v]=this._legalize(Q+2),o[R]=Q,B++;for(var G=r[R];X=r[G],h(E,N,e[2*G],e[2*G+1],e[2*X],e[2*X+1]);)Q=this._addTriangle(G,v,X,o[v],-1,o[G]),o[v]=this._legalize(Q+2),r[G]=G,B--,G=X;if(R===Y)for(;h(E,N,e[2*(X=i[R])],e[2*X+1],e[2*R],e[2*R+1]);)Q=this._addTriangle(X,v,R,-1,o[R],o[X]),this._legalize(Q+2),o[X]=Q,r[R]=R,B--,R=X;this._hullStart=i[v]=R,r[R]=i[G]=v,r[v]=G,a[this._hashKey(E,N)]=v,a[this._hashKey(e[2*R],e[2*R+1])]=R}}}this.hull=new Uint32Array(B);for(v=0,R=this._hullStart;v<B;v++)this.hull[v]=R,R=r[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)},t.prototype._hashKey=function(t,e){return Math.floor((i=t-this._cx,n=e-this._cy,r=i/(Math.abs(i)+Math.abs(n)),(n>0?3-r:1+r)/4*this._hashSize))%this._hashSize;var i,n,r},t.prototype._legalize=function(t){for(var e,i,n,o,s,a,h,c,l,u,p,f,y,d,v,m,g=this._triangles,_=this._halfedges,x=this.coords,b=0,M=0;;){var w=_[t],z=t-t%3;if(M=z+(t+2)%3,-1!==w){var P=w-w%3,S=z+(t+1)%3,O=P+(w+2)%3,A=g[M],j=g[t],k=g[S],V=g[O];if(e=x[2*A],i=x[2*A+1],n=x[2*j],o=x[2*j+1],s=x[2*k],a=x[2*k+1],h=x[2*V],c=x[2*V+1],l=void 0,u=void 0,p=void 0,f=void 0,y=void 0,d=void 0,void 0,v=void 0,m=void 0,(l=e-h)*((f=o-c)*(m=(y=s-h)*y+(d=a-c)*d)-(v=(p=n-h)*p+f*f)*d)-(u=i-c)*(p*m-v*y)+(l*l+u*u)*(p*d-f*y)<0){g[t]=V,g[w]=A;var q=_[O];if(-1===q){var T=this._hullStart;do{if(this._hullTri[T]===O){this._hullTri[T]=t;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(t,q),this._link(w,_[M]),this._link(M,O);var C=P+(w+1)%3;b<r.length&&(r[b++]=C)}else{if(0===b)break;t=r[--b]}}else{if(0===b)break;t=r[--b]}}return M},t.prototype._link=function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)},t.prototype._addTriangle=function(t,e,i,n,r,o){var s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=i,this._link(s,n),this._link(s+1,r),this._link(s+2,o),this.trianglesLen+=3,s},t}();function s(t,e,i,n){var r=t-i,o=e-n;return r*r+o*o}function a(t,e,i,n,r,o){var s=(n-e)*(r-t),a=(i-t)*(o-e);return Math.abs(s-a)>=33306690738754716e-32*Math.abs(s+a)?s-a:0}function h(t,e,i,n,r,o){return(a(r,o,t,e,i,n)||a(t,e,i,n,r,o)||a(i,n,r,o,t,e))<0}function c(t,e,i,n,r,o){var s=i-t,a=n-e,h=r-t,c=o-e,l=s*s+a*a,u=h*h+c*c,p=.5/(s*c-a*h),f=(c*l-a*u)*p,y=(s*u-h*l)*p;return f*f+y*y}function l(t,e,i,n){if(n-i<=20)for(var r=i+1;r<=n;r++){for(var o=e[a=t[r]],s=r-1;s>=i&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=a}else{s=n;u(t,i+n>>1,r=i+1),e[t[i]]>e[t[n]]&&u(t,i,n),e[t[r]]>e[t[n]]&&u(t,r,n),e[t[i]]>e[t[r]]&&u(t,i,r);var a;for(o=e[a=t[r]];;){do{r++}while(e[t[r]]<o);do{s--}while(e[t[s]]>o);if(s<r)break;u(t,r,s)}t[i+1]=t[s],t[s]=a,n-r+1>=s-i?(l(t,e,r,n),l(t,e,i,s-1)):(l(t,e,i,s-1),l(t,e,r,n))}}function u(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}e.Delaunator=o},533:function(t,e,i){"use strict";i(62),i(65),i(98),i(494),i(162),i(61),i(438),i(460),i(234),i(11),i(35),i(495),i(461),i(462),i(463),i(464),i(465),i(466),i(467),i(468),i(469),i(470),i(471),i(472),i(473),i(474),i(475),i(476),i(477),i(478),i(479),i(480),i(481),i(482),i(483),i(45);var n=this&&this.__generator||function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Voronoi=void 0;var r=function(){function t(){this._=[]}return t.prototype.moveTo=function(t,e){this._.push([t,e])},t.prototype.closePath=function(){this._.push(this._[0].slice())},t.prototype.lineTo=function(t,e){this._.push([t,e])},t.prototype.value=function(){return this._.length?this._:null},t}(),o=function(){function t(t,e){var i=void 0===e?[0,0,960,500]:e,n=i[0],r=i[1],o=i[2],s=i[3];if(!((o=+o)>=(n=+n)&&(s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length),this.vectors=new Float64Array(t.points.length),this.xmax=o,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}return t.prototype.update=function(){return this.delaunay.update(),this._init(),this},t.prototype._init=function(){for(var t=this.delaunay,e=t.points,i=t.hull,n=t.triangles,r=this.vectors,o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2),s=0,a=0,h=n.length,c=void 0,l=void 0;s<h;s+=3,a+=2){var u=2*n[s],p=2*n[s+1],f=2*n[s+2],y=e[u],d=e[u+1],v=e[p],m=e[p+1],g=e[f],_=e[f+1],x=v-y,b=m-d,M=g-y,w=_-d,z=x*x+b*b,P=M*M+w*w,S=2*(x*w-b*M);if(S)if(Math.abs(S)<1e-8)c=(y+g)/2,l=(d+_)/2;else{var O=1/S;c=y+(w*z-b*P)*O,l=d+(x*P-M*z)*O}else c=(y+g)/2-1e8*w,l=(d+_)/2+1e8*M;o[a]=c,o[a+1]=l}var A,j,k,V=i[i.length-1],q=4*V,T=e[2*V],C=e[2*V+1];r.fill(0);for(s=0;s<i.length;++s)A=q,j=T,k=C,q=4*(V=i[s]),T=e[2*V],C=e[2*V+1],r[A+2]=r[q]=k-C,r[A+3]=r[q+1]=T-j},t.prototype.cellPolygons=function(){var t,e,i,r;return n(this,(function(n){switch(n.label){case 0:t=this.delaunay.points,e=0,i=t.length/2,n.label=1;case 1:return e<i?(r=this.cellPolygon(e))?(r.index=e,[4,r]):[3,3]:[3,4];case 2:n.sent(),n.label=3;case 3:return++e,[3,1];case 4:return[2]}}))},t.prototype.cellPolygon=function(t){return(new r).value()},t.prototype._renderSegment=function(t,e,i,n,r){var o,s=this._regioncode(t,e),a=this._regioncode(i,n);0===s&&0===a?(r.moveTo(t,e),r.lineTo(i,n)):(o=this._clipSegment(t,e,i,n,s,a))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))},t.prototype.contains=function(t,e,i){return(e=+e)==e&&(i=+i)==i&&this.delaunay._step(t,e,i)===t},t.prototype.neighbors=function(t){var e,i,r,o,s,a,h,c,l;return n(this,(function(n){switch(n.label){case 0:if(!(e=this._clip(t)))return[3,8];i=0,r=this.delaunay.neighbors(t),n.label=1;case 1:if(!(i<r.length))return[3,8];if(o=r[i],!(s=this._clip(o)))return[3,7];a=0,h=e.length,n.label=2;case 2:if(!(a<h))return[3,7];c=0,l=s.length,n.label=3;case 3:return c<l?e[a]!=s[c]||e[a+1]!=s[c+1]||e[(a+2)%h]!=s[(c+l-2)%l]||e[(a+3)%h]!=s[(c+l-1)%l]?[3,5]:[4,o]:[3,6];case 4:return n.sent(),[3,7];case 5:return c+=2,[3,3];case 6:return a+=2,[3,2];case 7:return i++,[3,1];case 8:return[2]}}))},t.prototype._cell=function(t){var e=this.circumcenters,i=this.delaunay,n=i.inedges,r=i.halfedges,o=i.triangles,s=n[t];if(-1===s)return null;var a=[],h=s;do{var c=Math.floor(h/3);if(a.push(e[2*c],e[2*c+1]),o[h=h%3==2?h-2:h+1]!==t)break;h=r[h]}while(h!==s&&-1!==h);return a},t.prototype._clip=function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var i=this.vectors,n=4*t;return i[n]||i[n+1]?this._clipInfinite(t,e,i[n],i[n+1],i[n+2],i[n+3]):this._clipFinite(t,e)},t.prototype._clipFinite=function(t,e){for(var i,n,r,o,s,a=e.length,h=null,c=e[a-2],l=e[a-1],u=this._regioncode(c,l),p=0;p<a;p+=2)if(i=c,n=l,c=e[p],l=e[p+1],r=u,u=this._regioncode(c,l),0===r&&0===u)o=s,s=0,h?h.push(c,l):h=[c,l];else{var f=void 0,y=void 0,d=void 0,v=void 0,m=void 0;if(0===r){if(null===(f=this._clipSegment(i,n,c,l,r,u)))continue;y=f[0],d=f[1],v=f[2],m=f[3]}else{if(null===(f=this._clipSegment(c,l,i,n,u,r)))continue;v=f[0],m=f[1],y=f[2],d=f[3],o=s,s=this._edgecode(y,d),o&&s&&this._edge(t,o,s,h,h.length),h?h.push(y,d):h=[y,d]}o=s,s=this._edgecode(v,m),o&&s&&this._edge(t,o,s,h,h.length),h?h.push(v,m):h=[v,m]}if(h)o=s,s=this._edgecode(h[0],h[1]),o&&s&&this._edge(t,o,s,h,h.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return h},t.prototype._clipSegment=function(t,e,i,n,r,o){for(;;){if(0===r&&0===o)return[t,e,i,n];if(r&o)return null;var s=void 0,a=void 0,h=r||o;8&h?(s=t+(i-t)*(this.ymax-e)/(n-e),a=this.ymax):4&h?(s=t+(i-t)*(this.ymin-e)/(n-e),a=this.ymin):2&h?(a=e+(n-e)*(this.xmax-t)/(i-t),s=this.xmax):(a=e+(n-e)*(this.xmin-t)/(i-t),s=this.xmin),r?(t=s,e=a,r=this._regioncode(t,e)):(i=s,n=a,o=this._regioncode(i,n))}},t.prototype._clipInfinite=function(t,e,i,n,r,o){var s,a=Array.from(e);if((s=this._project(a[0],a[1],i,n))&&a.unshift(s[0],s[1]),(s=this._project(a[a.length-2],a[a.length-1],r,o))&&a.push(s[0],s[1]),a=this._clipFinite(t,a))for(var h=0,c=a.length,l=void 0,u=this._edgecode(a[c-2],a[c-1]);h<c;h+=2)l=u,u=this._edgecode(a[h],a[h+1]),l&&u&&(h=this._edge(t,l,u,a,h),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a},t.prototype._edge=function(t,e,i,n,r){for(;e!==i;){var o=void 0,s=void 0;switch(e){case 5:e=4;continue;case 4:e=6,o=this.xmax,s=this.ymin;break;case 6:e=2;continue;case 2:e=10,o=this.xmax,s=this.ymax;break;case 10:e=8;continue;case 8:e=9,o=this.xmin,s=this.ymax;break;case 9:e=1;continue;case 1:e=5,o=this.xmin,s=this.ymin}n[r]===o&&n[r+1]===s||!this.contains(t,o,s)||(n.splice(r,0,o,s),r+=2)}if(n.length>4)for(var a=0;a<n.length;a+=2){var h=(a+2)%n.length,c=(a+4)%n.length;(n[a]===n[h]&&n[h]===n[c]||n[a+1]===n[h+1]&&n[h+1]===n[c+1])&&(n.splice(h,2),a-=2)}return r},t.prototype._project=function(t,e,i,n){var r,o,s,a=1/0;if(n<0){if(e<=this.ymin)return null;(r=(this.ymin-e)/n)<a&&(s=this.ymin,o=t+(a=r)*i)}else if(n>0){if(e>=this.ymax)return null;(r=(this.ymax-e)/n)<a&&(s=this.ymax,o=t+(a=r)*i)}if(i>0){if(t>=this.xmax)return null;(r=(this.xmax-t)/i)<a&&(o=this.xmax,s=e+(a=r)*n)}else if(i<0){if(t<=this.xmin)return null;(r=(this.xmin-t)/i)<a&&(o=this.xmin,s=e+(a=r)*n)}return[o,s]},t.prototype._edgecode=function(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)},t.prototype._regioncode=function(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)},t}();e.Voronoi=o},534:function(t,e,i){"use strict";i.d(e,"b",(function(){return h})),i.d(e,"a",(function(){return p}));i(143),i(242),i(516),i(61),i(438),i(163),i(11),i(60),i(151),i(449),i(93),i(454),i(455),i(144);var n=i(600),r=i(56),o=i(489),s=i(484);function a(t){switch(t){case"Point":case"Vec3":return(new o.Vec3).copy(c());case"Line":return new o.Line(c(),c());case"Ray":return new o.Ray(c(),c().normalize());case"Segment":return new o.Segment(c(),c());case"Polyline":for(var e=[],i=0;i<Math.floor(100*Math.random()+3);i++)e.push(c());return new o.Polyline(e);case"Triangle":return new o.Triangle(c(200),c(200),c(200));case"Circle":return new o.Circle(c(),60*Math.random()+5,c().normalize());case"Disk":return new o.Disk(c(),60*Math.random()+5,c().normalize());case"Capsule":return new o.Capsule(c(),c())}}function h(t,e,i){var o=a(t),h=a(e),c=o["distance"+e](h);return i.add(u(o)),i.add(u(h)),c.closests&&2===c.closests.length&&i.add(function(t,e){var i,o=new s.i;(i=o.vertices).push.apply(i,Object(r.a)(t));var a=new s.l(Object(n.a)({color:16711680,dashSize:1,gapSize:1,scale:1},e)),h=new s.j(o,a);return h.computeLineDistances(),h}(c.closests)),c}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return o.v3(Math.random()*t-t/2,Math.random()*t,Math.random()*t-t/3)}function l(t,e){var i=t.clone().normalize(),n=e.clone().normalize(),r=i.clone().cross(n).normalize(),a=new s.w,h=o.clamp(i.normalize().dot(n.normalize()),-1,1);return h=Math.acos(h),a.setFromAxisAngle(r,h),a}function u(t,e){var i=null;if(t instanceof o.Point||t.isVec3){(a=new s.c).setAttribute("position",new s.h([t.x,t.y,t.z],3));var n=new s.u({size:5,sizeAttenuation:!1,color:1044720,alphaTest:.9,transparent:!0});i=new s.t(a,n)}else if(t instanceof o.Line){var a=new s.i,h=t.direction.clone().multiplyScalar(1e4).add(t.origin),c=t.direction.clone().multiplyScalar(-1e4).add(t.origin);a.vertices.push(h,c);n=new s.k({color:16777103});i=new s.j(a,n)}else if(t instanceof o.Ray){a=new s.i,h=t.direction.clone().multiplyScalar(1e4).add(t.origin);a.vertices.push(t.origin,h);n=new s.k({color:16748543});i=new s.j(a,n)}else if(t instanceof o.Segment){(a=new s.i).vertices.push(t.p0,t.p1);n=new s.k({color:9437183});i=new s.j(a,n)}else if(t instanceof o.Triangle){(a=new s.i).vertices=Object(r.a)(t),a.faces.push(new s.g(0,1,2));n=new s.p({color:9408511,side:s.e});i=new s.o(a,n)}else if(t instanceof o.Polyline){var p;(p=(a=new s.i).vertices).push.apply(p,Object(r.a)(t));n=new s.k({color:16748543});i=new s.j(a,n)}else if(t instanceof o.Polygon);else if(t instanceof o.Circle){a=new s.i;for(var f=t.radius,y=0;y<=128;y++){var d=new s.B;d.x=f*Math.cos(Math.PI/64*y),d.y=f*Math.sin(Math.PI/64*y),a.vertices.push(d)}var v=l(new s.B(0,0,1),t.normal);(m=new s.n).makeRotationFromQuaternion(v),a.applyMatrix(m),a.translate(t.center.x,t.center.y,t.center.z);n=new s.k({color:9437183});(i=new s.j(a,n)).add(new u(t.center)),i.add(new u(new o.Ray(t.center,t.normal)))}else if(t instanceof o.Disk){var m;a=new s.d(t.radius,128),n=new s.p({color:9408511,side:s.e}),v=l(new s.B(0,0,1),t.normal);(m=new s.n).makeRotationFromQuaternion(v),a.applyMatrix4(m),a.translate(t.center.x,t.center.y,t.center.z),(i=new s.o(a,n)).add(new u(t.center)),i.add(new u(new o.Ray(t.center,t.normal)))}return i}function p(t,e){var i="",n=0,r=function(t,e){var i=null;if("[object String]"!==Object.prototype.toString.call(t))try{i=JSON.stringify(t)}catch(t){console.error("您传递的json数据格式有误，请核对..."),console.error(t),e(t)}else try{t=t.replace(/(\')/g,'"'),i=JSON.stringify(JSON.parse(t))}catch(t){console.error("您传递的json数据格式有误，请核对..."),console.error(t),e(t)}return i}(t,e);if(!r)return r;var o=[],s=null,a=null,h=[];return r=(r=(r=(r=(r=r.replace(/([\{\}])/g,"\r\n$1\r\n")).replace(/([\[\]])/g,"\r\n$1\r\n")).replace(/(\,)/g,"$1\r\n")).replace(/(\r\n\r\n)/g,"\r\n")).replace(/\r\n\,/g,","),(h=r.split("\r\n")).forEach((function(t,e){var i=t.match(/\"/g)?t.match(/\"/g).length:0;i%2&&!s&&(s=e),i%2&&s&&s!=e&&(a=e),s&&a&&(o.push({start:s,end:a}),s=null,a=null)})),o.reverse().forEach((function(t,e){var i=h.slice(t.start,t.end+1);h.splice(t.start,t.end+1-t.start,i.join(""))})),r=(r=(r=h.join("\r\n")).replace(/\:\r\n\{/g,":{")).replace(/\:\r\n\[/g,":["),(h=r.split("\r\n")).forEach((function(t,e){console.log(t);var r=0,o=0,s="";for(t.match(/\{$/)||t.match(/\[$/)?o+=1:t.match(/\}$/)||t.match(/\]$/)||t.match(/\},$/)||t.match(/\],$/)?0!==n&&(n-=1):o=0,r=0;r<n;r++)s+="    ";i+=s+t+"\r\n",n+=o})),i.trim()}},569:function(t,e,i){"use strict";i(141),i(234),i(142),i(436);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.v4=e.Vec4=void 0;var o=i(450),s=i(457),a=function(t){function e(e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1);var o=t.call(this)||this;return o._x=e,o._y=i,o._z=n,o._w=r,o.isVec4=!0,s.buildAccessors(["x","y","z","w"],o),o}return r(e,t),e.isVec4=function(t){return!(isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))},Object.defineProperty(e.prototype,"width",{get:function(){return this.z},set:function(t){this.z=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.w},set:function(t){this.w=t},enumerable:!1,configurable:!0}),e.prototype.set=function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},e.prototype.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},e.prototype.setX=function(t){return this.x=t,this},e.prototype.setY=function(t){return this.y=t,this},e.prototype.setZ=function(t){return this.z=t,this},e.prototype.setW=function(t){return this.w=t,this},e.prototype.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},e.prototype.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)},e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},e.prototype.add=function(t,e){return void 0!==e?(console.warn("Vec4: .add() now only accepts one argument. Use .addVecs( a, b ) instead."),this.addVecs(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},e.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},e.prototype.addVecs=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},e.prototype.addScaledVec=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},e.prototype.sub=function(t,e){return void 0!==e?this.subVecs(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},e.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},e.prototype.subVecs=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},e.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},e.prototype.applyMat4=function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this},e.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},e.prototype.setAxisAngleFromQuat=function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},e.prototype.setAxisAngleFromRotationMatrix=function(t){var e,i,n,r,o=t.elements,s=o[0],a=o[4],h=o[8],c=o[1],l=o[5],u=o[9],p=o[2],f=o[6],y=o[10];if(Math.abs(a-c)<.01&&Math.abs(h-p)<.01&&Math.abs(u-f)<.01){if(Math.abs(a+c)<.1&&Math.abs(h+p)<.1&&Math.abs(u+f)<.1&&Math.abs(s+l+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var d=(s+1)/2,v=(l+1)/2,m=(y+1)/2,g=(a+c)/4,_=(h+p)/4,x=(u+f)/4;return d>v&&d>m?d<.01?(i=0,n=.707106781,r=.707106781):(n=g/(i=Math.sqrt(d)),r=_/i):v>m?v<.01?(i=.707106781,n=0,r=.707106781):(i=g/(n=Math.sqrt(v)),r=x/n):m<.01?(i=.707106781,n=.707106781,r=0):(i=_/(r=Math.sqrt(m)),n=x/r),this.set(i,n,r,e),this}var b=Math.sqrt((f-u)*(f-u)+(h-p)*(h-p)+(c-a)*(c-a));return Math.abs(b)<.001&&(b=1),this.x=(f-u)/b,this.y=(h-p)/b,this.z=(c-a)/b,this.w=Math.acos((s+l+y-1)/2),this},e.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},e.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},e.prototype.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},e.prototype.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},e.prototype.clampLength=function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},e.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},e.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},e.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},e.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},e.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},e.prototype.normalize=function(){return this.divideScalar(this.length()||1)},e.prototype.setLength=function(t){return this.normalize().multiplyScalar(t)},e.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},e.prototype.lerpVecs=function(t,e,i){return this.subVecs(e,t).multiplyScalar(i).add(t)},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},e.prototype.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},e.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},e.prototype.fromBufferAttribute=function(t,e,i){return void 0!==i&&console.warn("Vec4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},e}(o.EventHandler);e.Vec4=a,e.v4=function(t,e,i,n){return new a(t,e,i,n)}},570:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.m3=e.Mat3=void 0;var n=i(435).v3(),r=function(){function t(){this.elements=[1,0,0,0,1,0,0,0,1],this.isMat3=!0,arguments.length>0&&console.error("Mat3: the constructor no longer reads arguments. use .set() instead.")}return t.prototype.set=function(t,e,i,n,r,o,s,a,h){var c=this.elements;return c[0]=t,c[1]=n,c[2]=s,c[3]=e,c[4]=r,c[5]=a,c[6]=i,c[7]=o,c[8]=h,this},t.prototype.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},t.prototype.clone=function(){return(new t).fromArray(this.elements)},t.prototype.copy=function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},t.prototype.setFromMat4=function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},t.prototype.applyToBufferAttribute=function(t){for(var e=0,i=t.count;e<i;e++)n.x=t.getX(e),n.y=t.getY(e),n.z=t.getZ(e),n.applyMat3(this),t.setXYZ(e,n.x,n.y,n.z);return t},t.prototype.multiply=function(t){return this.multiplyMatrices(this,t)},t.prototype.premultiply=function(t){return this.multiplyMatrices(t,this)},t.prototype.multiplyMatrices=function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[3],a=i[6],h=i[1],c=i[4],l=i[7],u=i[2],p=i[5],f=i[8],y=n[0],d=n[3],v=n[6],m=n[1],g=n[4],_=n[7],x=n[2],b=n[5],M=n[8];return r[0]=o*y+s*m+a*x,r[3]=o*d+s*g+a*b,r[6]=o*v+s*_+a*M,r[1]=h*y+c*m+l*x,r[4]=h*d+c*g+l*b,r[7]=h*v+c*_+l*M,r[2]=u*y+p*m+f*x,r[5]=u*d+p*g+f*b,r[8]=u*v+p*_+f*M,this},t.prototype.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},t.prototype.determinant=function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],h=t[7],c=t[8];return e*o*c-e*s*h-i*r*c+i*s*a+n*r*h-n*o*a},t.prototype.getInverse=function(t,e){void 0===e&&(e=!1),t&&t.isMat4&&console.error("Mat3: .getInverse() no longer takes a Mat4 argument.");var i=t.elements,n=this.elements,r=i[0],o=i[1],s=i[2],a=i[3],h=i[4],c=i[5],l=i[6],u=i[7],p=i[8],f=p*h-c*u,y=c*l-p*a,d=u*a-h*l,v=r*f+o*y+s*d;if(0===v){var m="Mat3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(m);return console.warn(m),this.identity()}var g=1/v;return n[0]=f*g,n[1]=(s*u-p*o)*g,n[2]=(c*o-s*h)*g,n[3]=y*g,n[4]=(p*r-s*l)*g,n[5]=(s*a-c*r)*g,n[6]=d*g,n[7]=(o*l-u*r)*g,n[8]=(h*r-o*a)*g,this},t.prototype.transpose=function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},t.prototype.getNormalMatrix=function(t){return this.setFromMat4(t).getInverse(this).transpose()},t.prototype.transposeIntoArray=function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},t.prototype.setUvTransform=function(t,e,i,n,r,o,s){var a=Math.cos(r),h=Math.sin(r);this.set(i*a,i*h,-i*(a*o+h*s)+o+t,-n*h,n*a,-n*(-h*o+a*s)+s+e,0,0,1)},t.prototype.scale=function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.elements,r=n[0],o=n[3],s=n[6],a=n[1],h=n[4],c=n[7];return n[0]=e*r+i*a,n[3]=e*o+i*h,n[6]=e*s+i*c,n[1]=-i*r+e*a,n[4]=-i*o+e*h,n[7]=-i*s+e*c,this},t.prototype.translate=function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},t.prototype.equals=function(t){for(var e=this.elements,i=t.elements,n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0},t.prototype.fromArray=function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},t.prototype.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t},t}();e.Mat3=r,e.m3=function(){return new r}},571:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.euler=e.Euler=void 0;var n=i(435),r=i(437),o=i(514),s=i(451),a=o.m4(),h=s.quat(),c=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n="XYZ"),this._x=t,this._y=e,this._z=i,this._order=n,this.isEuler=!0}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this._onChangeCallback(),this},t.prototype.clone=function(){return new t(this._x,this._y,this._z,this._order)},t.prototype.copy=function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},t.prototype.setFromRotationMatrix=function(t,e,i){var n=t.elements,o=n[0],s=n[4],a=n[8],h=n[1],c=n[5],l=n[9],u=n[2],p=n[6],f=n[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r.clamp(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r.clamp(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(h,c)):(this._y=Math.atan2(-u,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r.clamp(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(h,o))):"ZYX"===e?(this._y=Math.asin(-r.clamp(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(p,f),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===e?(this._z=Math.asin(r.clamp(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===e?(this._z=Math.asin(-r.clamp(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-l,f),this._y=0)):console.warn("Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this._onChangeCallback(),this},t.prototype.setFromQuat=function(t,e,i){return a.makeRotationFromQuat(t),this.setFromRotationMatrix(a,e,i)},t.prototype.setFromVec3=function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},t.prototype.reorder=function(t){return h.setFromEuler(this),this.setFromQuat(h,t)},t.prototype.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},t.prototype.fromArray=function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},t.prototype.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},t.prototype.toVec3=function(t){return t?t.set(this._x,this._y,this._z):n.v3(this._x,this._y,this._z)},t.prototype._onChange=function(t){return this._onChangeCallback=t,this},t.prototype._onChangeCallback=function(){},t}();e.Euler=c,e.euler=function(t,e,i){return new c(t,e,i)}},572:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.Orientation=e.IntersectType=void 0,function(t){t[t.None=0]="None",t[t.Parallel=1]="Parallel",t[t.Perpendicular=2]="Perpendicular",t[t.Collineation=3]="Collineation"}(e.IntersectType||(e.IntersectType={})),function(t){t[t.None=-1]="None",t[t.Common=0]="Common",t[t.Positive=1]="Positive",t[t.Negative=2]="Negative",t[t.Intersect=3]="Intersect"}(e.Orientation||(e.Orientation={}))},573:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0})},581:function(t,e,i){"use strict";i(446),i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.recognitionPolygonNormal=e.recognitionCCW=e.recognitionPlane=void 0;var n=i(440),r=i(582),o=i(452);function s(t){t.sort(r.vectorCompare);for(var e=new n.Line(t[0],t.get(-1)),i=-1/0,s=-1,a=1;a<t.length-1;a++){var h=t[a],c=e.distancePoint(h).distance;c>i&&(i=c,s=a)}var l=new o.Plane;return l.setFromThreePoint(t[0],t.get(-1),t[s]),l}e.recognitionPlane=s,e.recognitionCCW=function(t){for(var e=0,i=0;i<t.length-1;i++){var n=t[i],r=t[i+1];e+=-.5*(r.y+n.y)*(r.x+n.x)}return e>0},e.recognitionPolygonNormal=function(t){return s(t).normal}},582:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.vectorCompare=void 0,e.vectorCompare=function(t,e){return t.x===e.x?void 0!==t.z&&t.y===e.y?t.z-e.z:t.y-e.y:t.x-e.x}},583:function(t,e,i){"use strict";i(62),i(65),i(98),i(494),i(488),i(235),i(446),i(460),i(584),i(234),i(11),i(35),i(495),i(531),i(493),i(461),i(462),i(463),i(464),i(465),i(466),i(467),i(585),i(468),i(469),i(470),i(471),i(472),i(473),i(474),i(475),i(476),i(477),i(478),i(479),i(480),i(481),i(482),i(483),i(45);var n=this&&this.__generator||function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(532),o=i(533),s=(Math.PI,Math.pow);function a(t,e,i){return[t+Math.sin(t+e)*i,e+Math.cos(t-e)*i]}var h=function(){function t(t){this._delaunator=new r.Delaunator(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return t.from=function(e){return new t(new Float64Array(e))},t.prototype.update=function(){return this._delaunator.update(),this._init(),this},t.prototype._init=function(){var t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){for(var e=t.triangles,i=t.coords,n=0;n<e.length;n+=3){var r=2*e[n],o=2*e[n+1],s=2*e[n+2];if((i[s]-i[r])*(i[o+1]-i[r+1])-(i[o]-i[r])*(i[s+1]-i[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(function(t,e){return e})).sort((function(t,i){return e[2*t]-e[2*i]||e[2*t+1]-e[2*i+1]}));for(var i=this.collinear[0],n=this.collinear[this.collinear.length-1],o=[e[2*i],e[2*i+1],e[2*n],e[2*n+1]],s=1e-8*Math.hypot(o[3]-o[1],o[2]-o[0]),h=0,c=e.length/2;h<c;++h){var l=a(e[2*h],e[2*h+1],s);e[2*h]=l[0],e[2*h+1]=l[1]}this._delaunator=new r.Delaunator(e)}else delete this.collinear;var u=this.halfedges=this._delaunator.halfedges,p=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,y=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(i=0,c=u.length;i<c;++i){l=f[i%3==2?i-2:i+1];-1!==u[i]&&-1!==y[l]||(y[l]=i)}for(h=0,c=p.length;h<c;++h)d[p[h]]=h;p.length<=2&&p.length>0&&(this.triangles=new Uint32Array(3).fill(-1),this.halfedges=new Uint32Array(3).fill(-1),this.triangles[0]=p[0],this.triangles[1]=p[1],this.triangles[2]=p[1],y[p[0]]=1,2===p.length&&(y[p[1]]=0))},t.prototype.voronoi=function(t){return new o.Voronoi(this,t)},t.prototype.neighbors=function(t){var e,i,r,o,s,a,h,c,l,u,p,f;return n(this,(function(n){switch(n.label){case 0:return i=(e=this).inedges,r=e.hull,o=e._hullIndex,s=e.halfedges,a=e.triangles,(h=e.collinear)?(c=h.indexOf(t))>0?[4,h[c-1]]:[3,2]:[3,5];case 1:n.sent(),n.label=2;case 2:return c<h.length-1?[4,h[c+1]]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2];case 5:if(-1===(l=i[t]))return[2];u=l,p=-1,n.label=6;case 6:return[4,p=a[u]];case 7:return n.sent(),a[u=u%3==2?u-2:u+1]!==t?[2]:-1!==(u=s[u])?[3,10]:(f=r[(o[t]+1)%r.length])===p?[3,9]:[4,f];case 8:n.sent(),n.label=9;case 9:return[2];case 10:if(u!==l)return[3,6];n.label=11;case 11:return[2]}}))},t.prototype.find=function(t,e,i){if(void 0===i&&(i=0),(t=+t)!=t||(e=+e)!=e)return-1;for(var n,r=i;(n=this._step(i,t,e))>=0&&n!==i&&n!==r;)i=n;return n},t.prototype._step=function(t,e,i){var n=this,r=n.inedges,o=n.hull,a=n._hullIndex,h=n.halfedges,c=n.triangles,l=n.points;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);var u=t,p=s(e-l[2*t],2)+s(i-l[2*t+1],2),f=r[t],y=f;do{var d=c[y],v=s(e-l[2*d],2)+s(i-l[2*d+1],2);if(v<p&&(p=v,u=d),c[y=y%3==2?y-2:y+1]!==t)break;if(-1===(y=h[y])){if((y=o[(a[t]+1)%o.length])!==d&&s(e-l[2*y],2)+s(i-l[2*y+1],2)<p)return y;break}}while(y!==f);return u},t}();e.default=h},586:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var n=i(435),r=function(){function t(t){this.min=n.v3(1/0,1/0,1/0),this.max=n.v3(-1/0,-1/0,-1/0),this._center=n.v3(),t&&this.setFromPoints(t)}return Object.defineProperty(t.prototype,"center",{get:function(){return this._center.add(this.min,this.max).multiplyScalar(.5)},enumerable:!1,configurable:!0}),t.prototype.setFromPoints=function(t){this.min.set(1/0,1/0,1/0),this.max.set(-1/0,-1/0,-1/0),this.expand.apply(this,t)},t.prototype.expand=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0;i<t.length;i++){var n=t[i];this.min.min(n),this.max.max(n)}this.center.addVecs(this.min,this.max).multiplyScalar(.5)},t}();e.Box=r},587:function(t,e,i){"use strict";i(141),i(234),i(142);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Capsule=void 0;var o=function(t){function e(e,i,n){void 0===n&&(n=0);var r=t.call(this,e,i)||this;return r.radius=n,r}return r(e,t),e}(i(442).Segment);e.Capsule=o},588:function(t,e,i){"use strict";i(234),Object.defineProperty(e,"__esModule",{value:!0}),e.disk=e.Disk=void 0;var n=i(435),r=function(){function t(t,e,i){void 0===i&&(i=n.Vec3.UnitY),this.center=t||n.v3(),this.normal=i,this.radius=e||0,this.w=this.normal.dot(t)}return t.prototype.area=function(){return Math.PI*this.radius*this.radius},t}();e.Disk=r,e.disk=function(t,e,i){return new r(t,e,i)}},589:function(t,e,i){"use strict";i(141),i(234),i(142);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var o=function(t){function e(e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),t.call(this,e,i,n)||this}return r(e,t),e}(i(435).Vec3);e.Point=o},590:function(t,e,i){"use strict";i(141),i(234),i(142);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var o=i(435),s=i(442),a=function(t){function e(i){var n=t.call(this,i)||this;return n.isPolygon=!0,Object.setPrototypeOf(n,e.prototype),n}return r(e,t),e.prototype.offset=function(t,i){void 0===i&&(i=o.Vec3.UnitY);for(var n=[],r=0;r<this.length;r++){var a=this[r],h=this[(r+1)%this.length],c=new s.Segment(a,h);n.push(c),c.offset(t,i)}for(r=0;r<this.length;r++){var l=n[r],u=n[r+1],p=l.distanceLine(u);l.p1=p.closests[0],u.p0=p.closests[1]}for(r=0;r<this.length;r++)l=n[r];return new e},e.prototype.containPoint=function(t){},e}(i(520).Polyline);e.Polygon=a},591:function(t,e,i){"use strict";i(234),i(436),Object.defineProperty(e,"__esModule",{value:!0}),e.Ray=void 0;var n=i(440),r=function(){function t(t,e){this.origin=t,this.direction=e.normalize()}return t.prototype.distanceRay=function(t){var e,i,n,r={parameters:[],closests:[]},o=this.origin.clone().sub(t.origin),s=-this.direction.dot(t.direction),a=o.dot(this.direction);if(Math.abs(s)<1)if(n=s*a-(e=-o.dot(t.direction)),(i=s*e-a)>=0)if(n>=0){var h=1-s*s;i/=h,n/=h}else n=0,i=a>=0?0:-a;else n>=0?(i=0,n=e>=0?0:-e):a<0?(i=-a,n=0):(i=0,n=e>=0?0:-e);else s>0?(n=0,i=a>=0?0:-a):a>=0?(i=0,n=-(e=-o.dot(t.direction))):(i=-a,n=0);return r.parameters[0]=i,r.parameters[1]=n,r.closests[0]=this.direction.clone().multiplyScalar(i).add(this.origin),r.closests[1]=t.direction.clone().multiplyScalar(n).add(t.origin),o=r.closests[0].clone().sub(r.closests[1]),r.distanceSqr=o.dot(o),r.distance=Math.sqrt(r.distanceSqr),r},t.prototype.distanceSegment=function(t){var e,i,n={parameters:[],closests:[]},r=t.center,o=t.direction,s=.5*t.extent,a=this.origin.clone().sub(r),h=-this.direction.dot(o),c=a.dot(this.direction);if(Math.abs(h)<1){var l=1-h*h,u=s*l,p=-a.dot(o);i=h*c-p,(e=h*p-c)>=0?i>=-u?i<=u?(e/=l,i/=l):(i=s,e=Math.max(-(h*i+c),0)):(i=-s,e=Math.max(-(h*i+c),0)):i<=-u?(e=-(-h*s+c))>0?i=-s:(e=0,(i=-p)<-s?i=-s:i>s&&(i=s)):i<=u?(e=0,(i=-p)<-s?i=-s:i>s&&(i=s)):(e=-(h*s+c))>0?i=s:(e=0,(i=-p)<-s?i=-s:i>s&&(i=s))}else i=h>0?-s:s,e=Math.max(-(h*i+c),0);return n.parameters[0]=e,n.parameters[1]=i,n.closests[0]=this.direction.clone().multiplyScalar(e).add(this.origin),n.closests[1]=o.clone().multiplyScalar(i).add(r),a=n.closests[0].clone().sub(n.closests[1]),n.distanceSqr=a.dot(a),n.distance=Math.sqrt(n.distanceSqr),n},t.prototype.distanceTriangle=function(t){var e={parameters:[],closests:[],triangleParameters:[]},i=new n.Line(this.origin,this.origin.clone().add(this.direction)).distanceTriangle(t);if(i.lineParameter>=0)e.distance=i.distance,e.distanceSqr=i.distanceSqr,e.rayParameter=i.lineParameter,e.triangleParameters[0]=i.triangleParameters[0],e.triangleParameters[1]=i.triangleParameters[1],e.triangleParameters[2]=i.triangleParameters[2],e.closests[0]=i.closests[0],e.closests[1]=i.closests[1];else{var r=this.origin.clone().distanceTriangle(t);e.distance=r.distance,e.distanceSqr=r.distanceSqr,e.rayParameter=0,e.triangleParameters[0]=r.triangleParameters[0],e.triangleParameters[1]=r.triangleParameters[1],e.triangleParameters[2]=r.triangleParameters[2],e.closests[0]=this.origin,e.closests[1]=r.closests[1]}return e},t.prototype.distancePloyline=function(){return{}},t}();e.Ray=r},592:function(t,e,i){"use strict";i(141),i(234),i(142);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Triangle=void 0;var o=function(t){function e(i,n,r){var o=t.call(this)||this;return Object.setPrototypeOf(o,e.prototype),o.push(i,n,r),o}return r(e,t),Object.defineProperty(e.prototype,"p0",{get:function(){return this[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"p1",{get:function(){return this[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"p2",{get:function(){return this[2]},enumerable:!1,configurable:!0}),e.prototype.distanceTriangle=function(t){},e}(Array);e.Triangle=o}}]);